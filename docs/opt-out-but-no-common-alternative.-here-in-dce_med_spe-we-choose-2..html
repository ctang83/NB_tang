<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2). | My Notebook</title>
  <meta name="description" content="Recording my learning stuff." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2). | My Notebook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Recording my learning stuff." />
  <meta name="github-repo" content="ctang83/NB_tang" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2). | My Notebook" />
  
  <meta name="twitter:description" content="Recording my learning stuff." />
  

<meta name="author" content="CTang" />


<meta name="date" content="2022-01-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="because-from-the-above-questionnaire-we-can-create-two-types-of-bdce-1-no-opt-out-but-include-common-alternative.html"/>
<link rel="next" href="r.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Notebook Tang</a></li>  

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="index.html"><a href="index.html#learn"><i class="fa fa-check"></i><b>1.0.1</b> Learn</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="bat-excelword-lyxlatex.html"><a href="bat-excelword-lyxlatex.html"><i class="fa fa-check"></i><b>2</b> bat, Excel/Word, Lyx/Latex</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bat-excelword-lyxlatex.html"><a href="bat-excelword-lyxlatex.html#bat"><i class="fa fa-check"></i><b>2.1</b> bat</a></li>
<li class="chapter" data-level="2.2" data-path="bat-excelword-lyxlatex.html"><a href="bat-excelword-lyxlatex.html#excelword"><i class="fa fa-check"></i><b>2.2</b> Excel/Word</a></li>
<li class="chapter" data-level="2.3" data-path="bat-excelword-lyxlatex.html"><a href="bat-excelword-lyxlatex.html#lyxlatex"><i class="fa fa-check"></i><b>2.3</b> Lyx/Latex</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="bat-excelword-lyxlatex.html"><a href="bat-excelword-lyxlatex.html#lyx"><i class="fa fa-check"></i><b>2.3.1</b> Lyx</a></li>
<li class="chapter" data-level="2.3.2" data-path="bat-excelword-lyxlatex.html"><a href="bat-excelword-lyxlatex.html#latex"><i class="fa fa-check"></i><b>2.3.2</b> Latex</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="online-book-and-dashboard.html"><a href="online-book-and-dashboard.html"><i class="fa fa-check"></i><b>3</b> Online book and Dashboard</a>
<ul>
<li class="chapter" data-level="3.1" data-path="online-book-and-dashboard.html"><a href="online-book-and-dashboard.html#网络抓取和网络数据传输"><i class="fa fa-check"></i><b>3.1</b> 网络抓取和网络数据传输</a></li>
<li class="chapter" data-level="3.2" data-path="online-book-and-dashboard.html"><a href="online-book-and-dashboard.html#building-online-bookbookdown"><i class="fa fa-check"></i><b>3.2</b> Building online book(Bookdown)</a></li>
<li class="chapter" data-level="3.3" data-path="online-book-and-dashboard.html"><a href="online-book-and-dashboard.html#best-single-page-template"><i class="fa fa-check"></i><b>3.3</b> Best single page (template)</a></li>
<li class="chapter" data-level="3.4" data-path="online-book-and-dashboard.html"><a href="online-book-and-dashboard.html#building-dashboardshinny"><i class="fa fa-check"></i><b>3.4</b> Building Dashboard(Shinny)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r_stata-run-stated-preference.html"><a href="r_stata-run-stated-preference.html"><i class="fa fa-check"></i><b>4</b> R_Stata run stated preference</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r_stata-run-stated-preference.html"><a href="r_stata-run-stated-preference.html#lc潜层模型"><i class="fa fa-check"></i><b>4.1</b> LC潜层模型</a></li>
<li class="chapter" data-level="4.2" data-path="r_stata-run-stated-preference.html"><a href="r_stata-run-stated-preference.html#binary-dceused-as-case-2-bws"><i class="fa fa-check"></i><b>4.2</b> Binary DCE(used as Case 2 BWS)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ps-2-blocks-16-questions-in-total-thus-each-one-answer-9-questions-including-one-consistent-test.html"><a href="ps-2-blocks-16-questions-in-total-thus-each-one-answer-9-questions-including-one-consistent-test.html"><i class="fa fa-check"></i><b>5</b> PS: 2 blocks, 16 questions in total, thus each one answer 9 questions (including one consistent test)</a></li>
<li class="chapter" data-level="6" data-path="because-from-the-above-questionnaire-we-can-create-two-types-of-bdce-1-no-opt-out-but-include-common-alternative.html"><a href="because-from-the-above-questionnaire-we-can-create-two-types-of-bdce-1-no-opt-out-but-include-common-alternative.html"><i class="fa fa-check"></i><b>6</b> Because from the above questionnaire, we can create two types of BDCE: 1) No opt-out but include common alternative;</a></li>
<li class="chapter" data-level="7" data-path="opt-out-but-no-common-alternative.-here-in-dce_med_spe-we-choose-2..html"><a href="opt-out-but-no-common-alternative.-here-in-dce_med_spe-we-choose-2..html"><i class="fa fa-check"></i><b>7</b> 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2).</a>
<ul>
<li class="chapter" data-level="7.1" data-path="opt-out-but-no-common-alternative.-here-in-dce_med_spe-we-choose-2..html"><a href="opt-out-but-no-common-alternative.-here-in-dce_med_spe-we-choose-2..html#case-1-bws"><i class="fa fa-check"></i><b>7.1</b> case 1 BWS</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>8</b> R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="r.html"><a href="r.html#workflowreproducible-research"><i class="fa fa-check"></i><b>8.1</b> Workflow/Reproducible research</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="r.html"><a href="r.html#r-markdown"><i class="fa fa-check"></i><b>8.1.1</b> R markdown</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="r.html"><a href="r.html#plotgraphvisualisation"><i class="fa fa-check"></i><b>8.2</b> Plot/graph/visualisation</a></li>
<li class="chapter" data-level="8.3" data-path="r.html"><a href="r.html#data"><i class="fa fa-check"></i><b>8.3</b> Data</a></li>
<li class="chapter" data-level="8.4" data-path="r.html"><a href="r.html#install-rrstudio"><i class="fa fa-check"></i><b>8.4</b> Install R/RStudio</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>9</b> Python</a>
<ul>
<li class="chapter" data-level="9.1" data-path="python.html"><a href="python.html#network-sciencecomplex-network"><i class="fa fa-check"></i><b>9.1</b> Network science(complex network)</a></li>
<li class="chapter" data-level="9.2" data-path="python.html"><a href="python.html#plot-and-visualisation"><i class="fa fa-check"></i><b>9.2</b> Plot and visualisation</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">With bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My Notebook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="opt-out-but-no-common-alternative.-here-in-dce_med_spe-we-choose-2." class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2).</h1>
<p>dm.med &lt;- make.design.matrix(
choice.experiment.design = med,
optout = TRUE, # include opt-out option
categorical.attributes = c(“Place,” “Facility,” “Mgment,” “Material,” “Career,” “Job,” “Patient”),
continuous.attributes = c(“Income”),
unlabeled = TRUE, # unlabeled design
common = NULL, # do not include common alternative
binary = TRUE) # BDCEs</p>
<div id="datasets-combine-ds.med-medspe-dm.med" class="section level18" number="7.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1">
<p class="heading"><span class="header-section-number">7.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1</span> Datasets combine: ds.med = medspe + dm.med</p>
<p>data(medspe) # Input respondent dataset (clear the consistent test question before input)</p>
<p>ds.med &lt;- make.dataset(
respondent.dataset = medspe, # respondent dataset
design.matrix = dm.med, # design matrix
choice.indicators = c(“q1,” “q2,” “q3,” “q4,” “q5,” “q6,” “q7,” “q8”),
detail = FALSE)</p>
<p>head(ds.rural1) # list head of the final dataset</p>
</div>
<div id="analysis-上面部分全部调试完毕分析部分以后做" class="section level18" number="7.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.2">
<p class="heading"><span class="header-section-number">7.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.2</span> Analysis 上面部分全部调试完毕，分析部分以后做</p>
<pre><code>fm.rural &lt;- RES ~ Agr + Env + Rec + Area + Tax
out.rural1 &lt;- glm(fm.rural,           # is glm() the clogit in Stata ? 
                  family = binomial(link = &quot;logit&quot;),
                  data = ds.rural1)
summary(out.rural1)
gofm(out.rural1)
out.rural2 &lt;- glm(fm.rural,
                  family = binomial(link = &quot;logit&quot;),
                  data = ds.rural2)
summary(out.rural2)
gofm(out.rural2)

mwtp.rural1 &lt;- mwtp(output = out.rural1,
                    monetary.variables = c(&quot;Tax&quot;),
                    nonmonetary.variables = c(&quot;Agr&quot;, &quot;Env&quot;, &quot;Rec&quot;, &quot;Area&quot;),
                    nreplications = 1000,
                    confidence.level = 0.95,
                    method = &quot;kr&quot;,
                    seed = 987)
mwtp.rural1
mwtp.rural2 &lt;- mwtp(output = out.rural2,
                    monetary.variables = c(&quot;Tax&quot;),
                    nonmonetary.variables = c(&quot;Agr&quot;, &quot;Env&quot;, &quot;Rec&quot;, &quot;Area&quot;),
                    nreplications = 1000,
                    confidence.level = 0.95,
                    method = &quot;kr&quot;,
                    seed = 987)
mwtp.rural2

str(mwtp.rural1$mwtps)
MWTP_Rec1 &lt;- mwtp.rural1$mwtps[, &quot;Rec&quot;]
MWTP_Rec2 &lt;- mwtp.rural2$mwtps[, &quot;Rec&quot;]
mded.rec &lt;- mded(distr1 = MWTP_Rec1,
                 distr2 = MWTP_Rec2,
                 detail = TRUE) 
mded.rec
par(mfrow = c(1, 2))  # not shown in SPMUR
hist(mded.rec$diff, main = &quot;(a) Rec&quot;, xlab = &quot;Difference&quot;)

MWTP_Area1 &lt;- mwtp.rural1$mwtps[, &quot;Area&quot;]
MWTP_Area2 &lt;- mwtp.rural2$mwtps[, &quot;Area&quot;]
mded.area &lt;- mded(distr1 = MWTP_Area1,
                  distr2 = MWTP_Area2,
                  detail = TRUE) 
mded.area
hist(mded.area$diff, main = &quot;(b) Area&quot;, xlab = &quot;Difference&quot;)

v0 &lt;- 0
Plan1 &lt;- c(1, 0, 0, 0, 20, 0)
v1 &lt;- sum(out.rural1$coef * Plan1)
(-1 / -out.rural1$coef[&quot;Tax&quot;]) * (v0 - v1) 

Plan2 &lt;- c(1, 1, 0, 0, 60, 0)
v2 &lt;- sum(out.rural1$coef * Plan2)
(-1  / -out.rural1$coef[&quot;Tax&quot;]) * (v0 - v2)

set.seed(123)
COEF &lt;- mvrnorm(out.rural1$coef,  # coefficients
                vcov(out.rural1), # variance-covariance 
                n = 1000)         # number of replications

V0 &lt;- rep(0, 1000)
V1 &lt;- COEF %*% Plan1 # %*% is matrix multiplication
C1 &lt;- (-1 / -COEF[, &quot;Tax&quot;]) * (V0 - V1)
V2 &lt;- COEF %*% Plan2
C2 &lt;- (-1  / -COEF[, &quot;Tax&quot;]) * (V0 - V2)

hist(C1, main = &quot;Case 1&quot;, xlab = &quot;Compensating variation&quot;)
hist(C2, main = &quot;Case 2&quot;, xlab = &quot;Compensating variation&quot;)

quantile(C1, c(0.025, 0.975))
quantile(C2, c(0.025, 0.975))

(-1 / -out.rural1$coef[&quot;Tax&quot;]) *
  (log(exp(v0) + exp(v1)) - log(exp(v0) + exp(v2)))

par(mfrow = c(1, 1))       # not shown in SPMUR
C3 &lt;- (-1 / -COEF[ ,&quot;Tax&quot;]) * 
  (log(exp(V0) + exp(V1)) - log(exp(V0) + exp(V2)))
hist(C3, main = &quot;&quot;, xlab = &quot;Compensating variation&quot;)
quantile(C3, c(0.025, 0.975))</code></pre>
</div>
<div id="case-1-bws" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> case 1 BWS</h2>
<p>{
#######################
% Two methods for constructing choice sets for case 1 BWS:
% 1. OMED - two level orthogonal main-effect design
% 2. BIBD - blanced incomplete block design (每题的number of items固定，所以建议只用这种)
####################### BIBD 可用的difference set
find.BIB(trt = 16, k = 6, b = 16 )
find.BIB(trt = 15, k = 7, b = 15 )
find.BIB(trt = 13, k = 4, b = 13 ) # 11 or 13 items is the best!
find.BIB(trt = 11, k = 5, b = 11 )
find.BIB(trt = 10, k = 4, b = 15 )
find.BIB(trt = 9, k = 3, b = 12 )
find.BIB(trt = 8, k = 4, b = 14 )
find.BIB(trt = 7, k = 3, b = 7 )
find.BIB(trt = 6, k = 3, b = 10 ) # 总共6个items，10 个问题，每个问题3个items</p>
<div id="用于7911个items的case-1-bws" class="section level11" number="7.1.0.0.0.0.0.0.0.0.1">
<p class="heading"><span class="header-section-number">7.1.0.0.0.0.0.0.0.0.1</span> 用于7，9,11个items的case 1 BWS</p>
<p>items &lt;- c(“1,” “2,” “3,” “4,” “5,” “6,” “7”)
items &lt;- c(“1,” “2,” “3,” “4,” “5,” “6,” “7,” “8,” “9”)<br />
items &lt;- c(“1,” “2,” “3,” “4,” “5,” “6,” “7,” “8,” “9,” “10,” “11”)
}
***************************************
* Organ donation - Results analysis by R (all output in D:)
所有结果输出都Stata化了，只需要解决2). Create dataset “final” = res + bibd
***************************************</p>
<p>rsource, terminator(END_R)
####################### 下面是成熟的针对13个items的程序，只需加载第2部分的新res数据库（res是来自调查的数据）
library(DoE.base)
library(crossdes) # crossdes package中的 find.BIB函数产生BIBD设计
library(support.BWS)
library(survival)
library(foreign)
###########################################################
### 1. Constructing choice sets &amp; Case 1 BWS questions (BIBD) - organ donation 器官捐献量表
###########################################################</p>
<pre><code>set.seed(123)
bibd &lt;- find.BIB(trt = 13, k = 4, b = 13)   # BIBD设计
isGYD(bibd)   # 此函数检查 trt，k，b 搭配是否平衡
%View(bibd)
items &lt;- c(&quot;Media&quot;, &quot;Religion&quot;, &quot;Tradition&quot;, &quot;Legislation&quot;, &quot;Family&quot;, 
           &quot;Experience&quot;, &quot;Self-decision&quot;, &quot;Consent&quot;, &quot;Withdrawal&quot;, &quot;Death&quot;, 
           &quot;Allocation&quot;, &quot;Indirect payment&quot;, &quot;Direct payment&quot;)

%接下来两步走，准备问卷和创建final数据库是独立的，
%%% 1). Preparing BWS questions   # design.type = 2 means BIBD

% bws.questionnaire(choice.sets = bibd,  design.type = 2,   item.names = items )  

%%% 2). Create dataset &quot;final&quot; = res + bibd

res&lt;-read.dta(&quot;D:/desk/Googledrive/fj_phs/data/res.dta&quot;)

final &lt;- bws.dataset(respondent.dataset = res,
                   response.type = 1,  # row number format
                   choice.sets = bibd,
                   design.type = 2,    # BIBD
                   item.names = items) 
write.dta(final,&quot;d:/BWS_final.dta&quot;)

%View(final)   # list dat 数据库，此数据库是最终用于分析的库</code></pre>
<p>###########################################################分析部分需要Stata化，R的分析完全没有过程！
### 2. Analyzing responses using “The Counting Approach” (output: 3 graphs)
# two tables: 1.Disaggregated best-worst scores &amp; 2.Aggregated best-worst scores
# 表1,2的关系是，表1所有系数乘以n (n是被调查人数)
###########################################################</p>
<pre><code>scores &lt;- bws.count(data = final)
scores
scores$aggregate

data&lt;-as.data.frame(scores$aggregate)   # med是list类型的对象, alt.1是attributes组合的对象
write.csv(data,&quot;d:/tab_BWS_aggregate_score.csv&quot;)  # 这个表待会读入Stata，然后转成Latex表

%%%%% Figure 1 Distribution of simple BW scores by items
          BW &lt;- data.frame(scores$disaggregate$BW)
          BW &lt;- lapply(BW, factor,  levels = c(-4:4))  # scores are transformed into a factor
score.tables &lt;- lapply(BW, table)                      # table for each item
      ylimit &lt;- max(unlist(score.tables))              # max count among items

pdf(&quot;d:/fig_BWS_bars_items.pdf&quot;)  # open .pdf for output
par(mfrow = c(4,4))    # create 4 x 4 figure regions, otherwise alarm of &quot;out of figure margin&quot;
for(i in 1:13){        # draw graph for item 1-13
  barplot(height = score.tables[[i]],
          main = items[i], # title
          xlab = c(&quot;BW score&quot;),  # label for x-axis
          ylab = c(&quot;Count&quot;),     # label for y-axis
          ylim = c(0, ylimit))   # limits for y-axis
}
dev.off()  # output graph with pdf type

%%%%%% Figure 2 Relationship between the mean BW score and its standard deviation
              Mean.BW &lt;- colMeans(scores$disaggregate$BW)
Standard.Deviation.BW &lt;- apply(scores$disaggregate$BW,  2, sd)

pdf(&quot;d:/fig_BWS_mean_SD.pdf&quot;)
plot(x = Mean.BW,  y = Standard.Deviation.BW,  xlim = c(-3, 3),  ylim = c(1, 2))
text(x = Mean.BW,  y = Standard.Deviation.BW,  pos = 4,    labels = items)
dev.off() 

%%%%%% Figure 3 Mean BW score per item in each cluster
set.seed(123)
kmeans &lt;- kmeans(x = scores$disaggregate$BW, centers = 2)
kmeans$centers

pdf(&quot;d:/fig_BWS_mean_ranking.pdf&quot;)
barplot(height = kmeans$centers, 
        names.arg = items , 
        beside = TRUE,     # draw juxtaposed bar
        legend = c(&quot;cluster.1&quot;, &quot;cluster.2&quot;), 
        horiz = TRUE,
        las = 2,
        xlab = &quot;BW score&quot;, 
        xlim = c(-4, 4))
dev.off()

END_R</code></pre>
<ul>
<li>读入tab_BWS_aggregate_score.csv 然后用mata转成Latex表</li>
</ul>
<pre><code>import delim using &quot;d:\tab_BWS_aggregate_score.csv&quot;  , clear
gen att_id=_n 
rename v1 att_name
order att_id , b(att_name)
* tex output
texsave _all using &quot;d:\tab_BWS_aggregate_score.tex&quot; , frag replace  ///
        title(Aggregated best-worst scores)  ///
        footnote(Note: The number of respondents is 190)  </code></pre>
<ul>
<li>Analyzing responses using the modeling approach</li>
</ul>
<pre><code>use  &quot;d:\final.dta&quot; , clear

fr &lt;- RES ~ A + B + C + E + F + G + H + I + J + K + L + M + strata(STR)   
    % the model exclude D to normalize its coefficient to 0
clogit(formula = fr, data = dat)</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="because-from-the-above-questionnaire-we-can-create-two-types-of-bdce-1-no-opt-out-but-include-common-alternative.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ctang83/NB_tang/tree/master/02-RStata_SP.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
