[["index.html", "My Notebook Chapter 1 Intro", " My Notebook CTang 2022-01-29 Chapter 1 Intro This notebook covers my everyday skill learning. 1.0.1 Learn To install RStudio have RStudio linked "],["bat-excelword-lyxlatex.html", "Chapter 2 bat, Excel/Word, Lyx/Latex 2.1 bat 2.2 Excel/Word 2.3 Lyx/Latex", " Chapter 2 bat, Excel/Word, Lyx/Latex 2.1 bat A batch file() is a script file(.bat) in DOS, OS/2 and Microsoft Windows. It consists of a series of commands to be executed by the command-line interpreter, stored in a plain text file. build a new project project D:_buildfolder.bat  SET log=.\\output\\rundirectory.log :: Clear output and externals DEL /F /Q .\\output\\ :: delrd. rd Filemon ::  /q /s :: filemonbat RMDIR .\\external /S /Q MKDIR .\\external :: Log start ECHO rundirectory.bat started &gt; %log% ECHO %DATE% &gt;&gt; %log% ECHO %TIME% &gt;&gt; %log% DIR .\\output\\ &gt;&gt; %log% :: Get externals SET rev=4 SET svnpath=https://booth.svn.cloudforge.com/svndemo/trunk/ SVN export &quot;%svnpath%/analysis/output/regressions.tex@%rev%&quot; &quot;./external/regressions.tex&quot; --force -r%rev% &gt;&gt; %log% SVN export &quot;%svnpath%/raw/data/potato.dta@%rev%&quot; &quot;../external/potato.dta&quot; --force -r%rev% &gt;&gt; %log% SVN export &quot;%svnpath%/raw/data/tv.dta@%rev%&quot; &quot;../external/tv.dta&quot; --force -r%rev% &gt;&gt; %log% :: Compile the paper PDFLATEX .\\source\\tv_potato_submission.tex -output-directory=.\\output\\ &gt;&gt; %log% :: Delete auxiliary files DEL .\\output\\tv_potato_submission.aux .\\output\\tv_potato_submission.log :: Merge files, clean resulting data set &quot;D:\\stata13_SE_unsw\\StataSE-64&quot; /e do mergefiles.do &quot;D:\\stata13_SE_unsw\\StataSE-64&quot; /e do cleandata.do :: Run regressions &quot;D:\\stata13_SE_unsw\\StataSE-64&quot; /e do &quot;D:\\svndemo\\branches\\analysis (alternative regressions)\\code\\regressions.do&quot; :: Append log files COPY %LOG% + regressions.log %LOG% DEL regressions.log :: Log end ECHO rundirectory.bat completed &gt;&gt; %log% ECHO %DATE% &gt;&gt; %log% ECHO %TIME% &gt;&gt; %log% bat ren aaa.txt bbb.doc :: aaa.txt  bbb.doc ren [Drive:][Path] filename1 filename2 cd.dllwindows copy cd.dll %windir%  start explorer D:and Inst  start D:_SE_unsw-64.exe D:and Inst\\0prog_IFRS.do -noteexpress start  D:.nel  start  D:\\03090561111137697.pdf ::pdf 2.2 Excel/Word Excelword, : WORD *0 ^? ^# ^$ ^&amp;   [!1-127]  =RANDBETWEEN(0,1) //01binary =round(rand()2 //0-1 excel alt+ excel,   =SUM(1/COUNTIF(D2:D477,D2:D477))  ctrl+shift+enter  excel   alt+F11VBE Sub 4() Do While ActiveCell &lt;&gt; &quot;&quot; ActiveCell.Offset(1, 0).Resize(4, 1).EntireRow.Insert shift:=xldowm ActiveCell.Offset(5, 0).Select Loop End Sub Alt+QExcel, Alt+F8 ; (4,1)(5,0) [!1-127] 200908052009 08 05 =REPLACE(REPLACE(A1,5,, ),8,, ) =TEXT(A1,0000 00 00) EXCEL- yyyy-mm excel1919xx19 excel-  Excel&amp;  ABS   AND TRUETRUE  FALSE  AVERAGE   COLUMN   CONCATENATE   COUNTIF   DATE   DATEDIF   DAY  DCOUNT   FREQUENCY   IF   INDEX   INT   ISERROR TRUEFALSE  LEFT   Left(A1, 2) LEN   MATCH   MAX   MID   MIN   MOD   MONTH   NOW   OR FALSEFALSETRUE  RANK   RIGHT   SUBTOTAL   SUM   SUMIF   TEXT   TODAY   VALUE   VLOOKUP   WEEKDAY   2.3 Lyx/Latex 2.3.1 Lyx Lyxarticle settingDocument ClassClass OptionsCustomUTF8ctex, encodingUnicode(XeTeX) (utf8) Lyx ctrl+D or ctrl+R LaTeX PreambleLaTeX  \\usepackage{xeCJK} \\setCJKmainfont{SimSun} View&gt;View[pdf(XeTeX)]ctrl+R article:  File &gt; New   Document&gt; Settings Document class CTeX CTeX Language Chinese (simplefied)Encoding  Unicode (XeTeX) (utf8) LyX XeTeXxeCJK outputDefault output format  PDF (XeTeX)XeTeXLyX PDF 2.3.2 Latex pdfpages \\includepdf\\includepdfset{pagecommand={}}include  \\(-\\) % \\item \\item[] %  pdf \\begin{figure}[htbp!] \\centering \\includegraphics[width=12cm]{./output/Pat_see_Doc_on_expected_profit.pdf}\\\\ \\caption{Patients&#39; decision to see Doctor (get diagnosis) on expected profit} \\label{fig2} \\end{figure} latex  \\usepackage[inline]{trackchanges}  \\addeditor{Tang}; latex \\note[Marian]{.} latex-caption- ^,  \\textsuperscript{1} latexoutput \\input{./output/filename.tex} : \\(\\theta\\) or $\\theta$ online latex: sharelatex .vs. writelatex writelatex google account,  bib, &amp; ,  \\&amp;, e.g. Journal of Economic Behavior \\&amp; Organization  \\label \\caption  ,  latex \\input{} new page \\include{} new page pdf \\usepackage{pdfpages} \\includepdf[pages=-]{myfile.pdf} latex \\documentclass[a4paper] {article} \\usepackage{booktabs} % \\toprule \\usepackage{multirow} %  \\usepackage{array} % cell width \\usepackage{pdflscape} % \\begin{landscape} \\usepackage{longtable} \\usepackage{caption} % longtable caption center latex \\toprule % \\hline \\midrule \\cmidrule{2-9} % 2-9columns \\bottomrule %-- \\hline %hline \\chline{2-9} latexcells latexcells \\multicolumn{1}{l}{} \\multicolumn{&#39;num_cols&#39;}{&#39;alignment&#39;}{&#39;contents&#39;} \\multicolumn{1}{p{2cm}}{CL} % p{} \\multirow{&#39;&#39;num_rows&#39;&#39;}{&#39;&#39;width&#39;&#39;}{&#39;&#39;contents&#39;&#39;} \\multirow{2}{2cm}{CL} %  latexcells- \\hspace{5cm} latexcells  $^1$ latexcells _  \\_ latexcells &gt;  \\textgreater latexcells &lt;  \\textless latexcells =  1, : ``AAAA  caption{} \\label{ch:xx} % ch=chapter chapterPhD Figure \\ref{ch:xxx}  wordnoteexpress\\cite{xxx} \\newpage \\nocite{CurrieRossin-1756, AlmondCurrie-1194, CurrieStabile} %NoteExpress \\bibliographystyle{alpha} %reference \\bibliography{fluo.bib} %BibtexNoteExpress citation: \\usepackage{natbib}  http://www.reed.edu/cis/Help/LaTex/images/natbibA-Ncitations.png  (\\citet*{}, \\citep*{} ) \\citet{} % text  \\citep{} %  (Lim and Yang et al., 2004; Tang and Zhang et al., 2014)  \\textit{}  {\\it xxxx}  \\textbf{}  {\\bf xxxx}  \\underline{}  \\usepackage{setspace} \\begin{spacing}{2.0} \\end{spacing}  \\begin{align*} &amp; equation 1 \\\\ &amp; equation 2 end{align*} \\begin{equation} \\label{eq:erl} a = bq + r \\end{equation} where \\eqref{eq:erl} is true if $a$ and $b$ are integers with $b \\neq c$. 3: 1. %; 2.  \\iffalse .... \\fi ; 3.  \\begin{comment} ... \\end{comment} -- \\usepackage{verbatim}. $&gt;$  $\\vert$  latex + dvipdfmx epspdfpngjpg   \\tiny \\scriptsize \\footnotesize \\small \\normalsize \\large \\Large \\LARGE \\huge \\Huge  \\hspace{1cm}  \\vspace{1cm} quad a \\qquad b m quad a \\quad b m  a\\ b 1/3m  a\\;b 2/7m  a\\,b 1/6m  ab  a\\!b 1/6m Q: Beamerpdflatexepsepspdfbeamereps A: epsbeamerdvi-ps-pdf texTexify,dvi dvi2psps ps2pdfpdf "],["r_onlinebookdashboard.html", "Chapter 3 R_Onlinebook/Dashboard 3.1 Online data collection/transfer 3.2 Building online book(Bookdown) 3.3 Best single page (template) 3.4 Building Dashboard(Shinny)", " Chapter 3 R_Onlinebook/Dashboard 3.1 Online data collection/transfer Ideally, or the perfect situation, is that we collect and summarise data from internet, clean data, analyse data, and present outcomes online. Data infrastructure of Australia library(aurin) is Australias single largest resource for accessing clean, integrated, spatially enabled and research-ready data on issues surrounding health and wellbeing, socio-economic metrics, transportation, and land-use. This package provides functions to download and search datasets from the AURIN API (its free to use!). R rvest: Easily Harvest (Scrape) Web Pages   RRCurlXML pythonrequestsBeautifulSoup R Rfacebook: facebook XML(eXtensible Markup Language), , ,  3.2 Building online book(Bookdown) This tutorial will show us easiest way to build an online book (or a book-style website) through RStudio and GitHub (may also by bookdown.org). Well call this book BB. 1) Start on local computer Copy folder D:_template(this version is from Jules32, much easier than Yihuis bookdown-demo) to a reasonable place Rename 2 things from bookdown_template to BB: the folder itself the .Rproj file Double-click the .Rproj file to launch RStudio Click on the Build tab in the top right pane to build book 2) Create BB GitHub repo Go to your GitHub account: github.com/username Click on Repositories, and the green button New to create a new repo Name this new repo BB (DO NOT initialize this repo with a README) Click the green create repository button, then copy URL 3) Turn bookdown_template into BB Go back to RStudio, to your BB project In the Console, type usethis::use_git() and say Yes to the two prompts. This will restart R and give you a new Git tab in the upper right pane. Now, click on the Terminal tab next to the Console tab. Type git remote add origin URL Type git push --set-upstream origin master 4) Publish BB (Last step) Refresh github, then files should be there! Click Settings Scroll down to GitHub Pages, click Check it out here Change the Source pulldown from None to master branch /docs folder It should say Your site is ready to be published at https://username.github.io/BB/ 5) Write local .Rmd, build and update online book in Github Rstudio to build(knitr) the whole book, including all .Rmd files In Build panel, click Build Book or in Console, type rmarkdown::render_site(encoding = 'UTF-8') In Git panel, select all files, click Commit, appears a new window Input XX changes, click Commit Finally, click Push -&gt; Done! PS: we ignore Travis and related continuous integration() here, actually now Yihui uses Makefile and _render.R instead. 6) Adding chapters and citations 3.3 Best single page (template) In above chapter Building online book(Bookdown), multiple *.Rmd and .md files, along with a site YAML file(vs. YAML header), as input, a multipage website or book with internal navigation as output. (This is how the course web pages are constructed.) If we dont need a book structure, but a single page. We use YAML header in single .Rmd, with outputing a single HTML. The template robobook is great for reading. --- title: &quot;&quot; date: &quot;2022-01-29&quot; #outputmultiple .Rmd files_output.yml # bookdown::gitbook:  rmdformats::robobook: output: rmdformats::robobook: code_folding: show self_contained: true default_style: &quot;light&quot; downcute_theme: &quot;default&quot; --- #```{r setup, include=FALSE} #Global options #knitr::opts_chunk$set(cache = TRUE) #``` 3.4 Building Dashboard(Shinny) "],["r_stata-run-stated-preference.html", "Chapter 4 R_Stata run stated preference 4.1 LC 4.2 Binary DCE(used as Case 2 BWS) 4.3 case 1 BWS", " Chapter 4 R_Stata run stated preference Install.packages(logitr) This package can estimate MNL and MXL, derive WTPs from Preference space and WTP space. For details, see random utility model in two spaces Install.packages(mixl) This R package for estimating complex choice models (MXL) on large datasets How to refer to a variable name with spaces? : backticks `(), : &gt;RES ~Indirect payment+Direct payment+strata~ R 4.1 LC Install.packages(BayesLCA) An R package for bayesian latent class analysis : Three methods for fitting the model are provided, incorporating an expectation-maximization (EM) algorithm, Gibbs sampling and a variational Bayes approximation. 4.2 Binary DCE(used as Case 2 BWS) 3.4.3 Organ donation - Binary DCE(Lma method) BDCE Case 2 BWS Stata, R, DCEmed(medR) rsource, terminator(END_R) library(survival) library(stats) library(support.CEs) library(foreign) # for Stata dataset output % DCEattrs-levels med &lt;- Lma.design( attribute.names = list( consent = c(&quot;implicit&quot;, &quot;active&quot;), final = c(&quot;no&quot;, &quot;yes&quot;), reg = c(&quot;various&quot;,&quot;unique&quot;), quit = c(&quot;never&quot;, &quot;ask&quot;), death = c(&quot;brain&quot;,&quot;other&quot;), priority = c(&quot;no&quot;,&quot;yes&quot;), acknow = c(&quot;no&quot;,&quot;yes&quot;), payment = c(&quot;0&quot;,&quot;1w&quot;,&quot;2w&quot;,&quot;3w&quot;) ), nalternatives = 1, # create design for a BDCE nblocks = 4, row.renames = FALSE, seed = 987) % meddes36x1118choice set36alternatives(observations), % 11(2*5+1,51)alternative attributes(med) head(med) questionnaire(choice.experiment.design = med ) data&lt;-as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes write.dta(data,&quot;d:/test.dta&quot;) # BDCE attributes q() END_R use d:\\test.dta , clear 3.4.3  Binary DCE(Lma method) BDCE case 2 BWS rsource, terminator(END_R) library(survival) library(stats) library(support.CEs) library(foreign) # for Stata dataset output ################## questionnaire ############################# med &lt;- Lma.design( attribute.names = list(Place = c(&quot;Urban&quot;, &quot;Rural&quot;), Facility = c(&quot;Hospital&quot;, &quot;CHC&quot;), Mgment = c(&quot;Fsuppot&quot;, &quot;Psuppot&quot;), Material = c(&quot;Fully&quot;, &quot;Poorly&quot;), Style = c(&quot;Required&quot;, &quot;Not&quot;), Career = c(&quot;Sufficient&quot;, &quot;Limited&quot;), Income = c(&quot;2000&quot;, &quot;4000&quot;, &quot;6000&quot;, &quot;8000&quot;)), nalternatives = 1, # create design for a BDCE nblocks = 2, row.renames = FALSE, seed = 987) questionnaire(choice.experiment.design = med ) as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes % PS: 2 blocks, 16 questions in total, thus each one answer 9 questions (including one consistent test) ################## design matrix -- dm.med ############################# - Because from the above questionnaire, we can create two types of BDCE: - 1) No opt-out but include common alternative; - 2) Opt-out but no common alternative. # Here in DCE_med_spe, we choose 2). dm.med &lt;- make.design.matrix( choice.experiment.design = med, optout = TRUE, # include opt-out option categorical.attributes = c(&quot;Place&quot;, &quot;Facility&quot;, &quot;Mgment&quot;, &quot;Material&quot;, &quot;Style&quot;, &quot;Career&quot; ), continuous.attributes = c(&quot;Income&quot;), unlabeled = TRUE, # unlabeled design common = NULL, # do not include common alternative binary = TRUE) # BDCEs ################## Datasets combine: final = res + dm.med ############################# data(res) # Input respondent dataset (clean the consistent test question before input) /* res ID BLOCK q1 q2 q3 q4 1 1 1 1 1 0 0 2 2 2 1 0 0 1 3 3 3 1 0 0 1 4 4 4 0 1 0 0 5 5 1 0 1 0 0 6 6 2 1 1 0 1 */ final &lt;- make.dataset( respondent.dataset = res, # respondent dataset design.matrix = dm.med, # design matrix choice.indicators = c(&quot;q1&quot;, &quot;q2&quot;, &quot;q3&quot;, &quot;q4&quot;, &quot;q5&quot;, &quot;q6&quot;, &quot;q7&quot;, &quot;q8&quot;), detail = FALSE) write.dta(final,&quot;d:/test.dta&quot;) # BDCE attributes ################## Analysis #############################  END_R 3.4.3  BDCE , Lma method, BDCE case 2 BWS rsource, terminator(END_R) library(survival) library(stats) library(support.CEs) library(foreign) # for Stata dataset output ################## questionnaire ############################# med &lt;- Lma.design(attribute.names = list( Place = c(&quot;Urban&quot;, &quot;Rural&quot;), Facility = c(&quot;Hospital&quot;, &quot;CHC&quot;), Mgment = c(&quot;Fsuppot&quot;, &quot;Psuppot&quot;), Material = c(&quot;Fully&quot;, &quot;Poorly&quot;), Career = c(&quot;Sufficient&quot;, &quot;Limited&quot;), Job = c(&quot;Matched&quot;, &quot;Nonmatched&quot;), Patient = c(&quot;Good&quot;, &quot;Fair&quot;), Income = c(&quot;2000&quot;, &quot;4000&quot;, &quot;6000&quot;, &quot;8000&quot;)), nalternatives = 1, # create design for a BDCE nblocks = 2, row.renames = FALSE, seed = 987) questionnaire(choice.experiment.design = med ) as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes # PS: 2 blocks, 16 questions in total, thus each one answer 9 questions (including one consistent test) ################## Matched design matrix -- dm.med ############################# # Because from the above questionnaire, we can create two types of BDCE: 1) No opt-out but include common alternative; # 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2). dm.med &lt;- make.design.matrix( choice.experiment.design = med, optout = TRUE, # include opt-out option categorical.attributes = c(&quot;Place&quot;, &quot;Facility&quot;, &quot;Mgment&quot;, &quot;Material&quot;, &quot;Career&quot;, &quot;Job&quot;, &quot;Patient&quot;), continuous.attributes = c(&quot;Income&quot;), unlabeled = TRUE, # unlabeled design common = NULL, # do not include common alternative binary = TRUE) # BDCEs ################## Datasets combine: ds.med = medspe + dm.med ############################# data(medspe) # Input respondent dataset (clear the consistent test question before input) ds.med &lt;- make.dataset( respondent.dataset = medspe, # respondent dataset design.matrix = dm.med, # design matrix choice.indicators = c(&quot;q1&quot;, &quot;q2&quot;, &quot;q3&quot;, &quot;q4&quot;, &quot;q5&quot;, &quot;q6&quot;, &quot;q7&quot;, &quot;q8&quot;), detail = FALSE) head(ds.rural1) # list head of the final dataset ################## Analysis  ############################# fm.rural &lt;- RES ~ Agr + Env + Rec + Area + Tax out.rural1 &lt;- glm(fm.rural, # is glm() the clogit in Stata ? family = binomial(link = &quot;logit&quot;), data = ds.rural1) summary(out.rural1) gofm(out.rural1) out.rural2 &lt;- glm(fm.rural, family = binomial(link = &quot;logit&quot;), data = ds.rural2) summary(out.rural2) gofm(out.rural2) mwtp.rural1 &lt;- mwtp(output = out.rural1, monetary.variables = c(&quot;Tax&quot;), nonmonetary.variables = c(&quot;Agr&quot;, &quot;Env&quot;, &quot;Rec&quot;, &quot;Area&quot;), nreplications = 1000, confidence.level = 0.95, method = &quot;kr&quot;, seed = 987) mwtp.rural1 mwtp.rural2 &lt;- mwtp(output = out.rural2, monetary.variables = c(&quot;Tax&quot;), nonmonetary.variables = c(&quot;Agr&quot;, &quot;Env&quot;, &quot;Rec&quot;, &quot;Area&quot;), nreplications = 1000, confidence.level = 0.95, method = &quot;kr&quot;, seed = 987) mwtp.rural2 str(mwtp.rural1$mwtps) MWTP_Rec1 &lt;- mwtp.rural1$mwtps[, &quot;Rec&quot;] MWTP_Rec2 &lt;- mwtp.rural2$mwtps[, &quot;Rec&quot;] mded.rec &lt;- mded(distr1 = MWTP_Rec1, distr2 = MWTP_Rec2, detail = TRUE) mded.rec par(mfrow = c(1, 2)) # not shown in SPMUR hist(mded.rec$diff, main = &quot;(a) Rec&quot;, xlab = &quot;Difference&quot;) MWTP_Area1 &lt;- mwtp.rural1$mwtps[, &quot;Area&quot;] MWTP_Area2 &lt;- mwtp.rural2$mwtps[, &quot;Area&quot;] mded.area &lt;- mded(distr1 = MWTP_Area1, distr2 = MWTP_Area2, detail = TRUE) mded.area hist(mded.area$diff, main = &quot;(b) Area&quot;, xlab = &quot;Difference&quot;) v0 &lt;- 0 Plan1 &lt;- c(1, 0, 0, 0, 20, 0) v1 &lt;- sum(out.rural1$coef * Plan1) (-1 / -out.rural1$coef[&quot;Tax&quot;]) * (v0 - v1) Plan2 &lt;- c(1, 1, 0, 0, 60, 0) v2 &lt;- sum(out.rural1$coef * Plan2) (-1 / -out.rural1$coef[&quot;Tax&quot;]) * (v0 - v2) set.seed(123) COEF &lt;- mvrnorm(out.rural1$coef, # coefficients vcov(out.rural1), # variance-covariance n = 1000) # number of replications V0 &lt;- rep(0, 1000) V1 &lt;- COEF %*% Plan1 # %*% is matrix multiplication C1 &lt;- (-1 / -COEF[, &quot;Tax&quot;]) * (V0 - V1) V2 &lt;- COEF %*% Plan2 C2 &lt;- (-1 / -COEF[, &quot;Tax&quot;]) * (V0 - V2) hist(C1, main = &quot;Case 1&quot;, xlab = &quot;Compensating variation&quot;) hist(C2, main = &quot;Case 2&quot;, xlab = &quot;Compensating variation&quot;) quantile(C1, c(0.025, 0.975)) quantile(C2, c(0.025, 0.975)) (-1 / -out.rural1$coef[&quot;Tax&quot;]) * (log(exp(v0) + exp(v1)) - log(exp(v0) + exp(v2))) par(mfrow = c(1, 1)) # not shown in SPMUR C3 &lt;- (-1 / -COEF[ ,&quot;Tax&quot;]) * (log(exp(V0) + exp(V1)) - log(exp(V0) + exp(V2))) hist(C3, main = &quot;&quot;, xlab = &quot;Compensating variation&quot;) quantile(C3, c(0.025, 0.975)) 4.3 case 1 BWS Two methods for constructing choice sets for case 1 BWS: OMED - two level orthogonal main-effect design BIBD - blanced incomplete block design (number of items)BIBD difference set ``` find.BIB(trt = 16, k = 6, b = 16 ) find.BIB(trt = 15, k = 7, b = 15 ) find.BIB(trt = 13, k = 4, b = 13 ) # 11 or 13 items is the best! find.BIB(trt = 11, k = 5, b = 11 ) find.BIB(trt = 10, k = 4, b = 15 ) find.BIB(trt = 9, k = 3, b = 12 ) find.BIB(trt = 8, k = 4, b = 14 ) find.BIB(trt = 7, k = 3, b = 7 ) find.BIB(trt = 6, k = 3, b = 10 ) # 6items10 3items 4.3.0.0.0.0.0.0.0.0.1 79,11itemscase 1 BWS items &lt;- c(1, 2, 3, 4, 5, 6, 7) items &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9) items &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11) - Organ donation - Results analysis by R (all output in D:\\) , Stata, 2Create dataset: &quot;final&quot; = res + bibd rsource, terminator(END_R) ####################### 13items2resres library(DoE.base) library(crossdes) # crossdes package find.BIBBIBD library(support.BWS) library(survival) library(foreign) ########################################################### %%% 1. Constructing choice sets &amp; Case 1 BWS questions (BIBD) - organ donation  ########################################################### set.seed(123) bibd &lt;- find.BIB(trt = 13, k = 4, b = 13) # BIBD isGYD(bibd) #  trtkb  %View(bibd) items &lt;- c(Media, Religion, Tradition, Legislation, Family, Experience, Self-decision, Consent, Withdrawal, Death, Allocation, Indirect payment, Direct payment) %final %%% 1). Preparing BWS questions # design.type = 2 means BIBD % bws.questionnaire(choice.sets = bibd, design.type = 2, item.names = items ) %%% 2). Create dataset final = res + bibd res&lt;-read.dta(D:/desk/Googledrive/fj_phs/data/res.dta) final &lt;- bws.dataset(respondent.dataset = res, response.type = 1, # row number format choice.sets = bibd, design.type = 2, # BIBD item.names = items) write.dta(final,d:/BWS_final.dta) %View(final) # list dat  4.3.0.0.0.0.0.0.0.0.1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1 %%% 2. Analyzing responses using The Counting Approach (output: 3 graphs) % two tables: 1.Disaggregated best-worst scores &amp; 2.Aggregated best-worst scores % 1,21n (n) % PS: StataR ########################################################### scores &lt;- bws.count(data = final) scores scores$aggregate data&lt;-as.data.frame(scores$aggregate) # medlist, alt.1attributes write.csv(data,d:/tab_BWS_aggregate_score.csv) # StataLatex %%%%% Figure 1 Distribution of simple BW scores by items BW &lt;- data.frame(scores\\(disaggregate\\)BW) BW &lt;- lapply(BW, factor, levels = c(-4:4)) # scores are transformed into a factor score.tables &lt;- lapply(BW, table) # table for each item ylimit &lt;- max(unlist(score.tables)) # max count among items pdf(d:/fig_BWS_bars_items.pdf) # open .pdf for output par(mfrow = c(4,4)) # create 4 x 4 figure regions, otherwise alarm of out of figure margin for(i in 1:13){ # draw graph for item 1-13 barplot(height = score.tables[[i]], main = items[i], # title xlab = c(BW score), # label for x-axis ylab = c(Count), # label for y-axis ylim = c(0, ylimit)) # limits for y-axis } dev.off() # output graph with pdf type %%%%%% Figure 2 Relationship between the mean BW score and its standard deviation Mean.BW &lt;- colMeans(scores\\(disaggregate\\)BW) Standard.Deviation.BW &lt;- apply(scores\\(disaggregate\\)BW, 2, sd) pdf(d:/fig_BWS_mean_SD.pdf) plot(x = Mean.BW, y = Standard.Deviation.BW, xlim = c(-3, 3), ylim = c(1, 2)) text(x = Mean.BW, y = Standard.Deviation.BW, pos = 4, labels = items) dev.off() %%%%%% Figure 3 Mean BW score per item in each cluster set.seed(123) kmeans &lt;- kmeans(x = scores\\(disaggregate\\)BW, centers = 2) kmeans$centers pdf(d:/fig_BWS_mean_ranking.pdf) barplot(height = kmeans$centers, names.arg = items , beside = TRUE, # draw juxtaposed bar legend = c(cluster.1, cluster.2), horiz = TRUE, las = 2, xlab = BW score, xlim = c(-4, 4)) dev.off() END_R - tab_BWS_aggregate_score.csv mataLatex import delim using d:_BWS_aggregate_score.csv , clear gen att_id=_n rename v1 att_name order att_id , b(att_name) * tex output texsave _all using d:_BWS_aggregate_score.tex , frag replace /// title(Aggregated best-worst scores) /// footnote(Note: The number of respondents is 190) - Analyzing responses using the modeling approach use d:.dta , clear fr &lt;- RES ~ A + B + C + E + F + G + H + I + J + K + L + M + strata(STR) % the model exclude D to normalize its coefficient to 0 clogit(formula = fr, data = dat) &lt;!--chapter:end:04-RStata_SP.Rmd--&gt; # R ## Workflow/Reproducible research - notebook interface? : humancomputer interaction-, , notebook interface(literate programming), which input PDF, while output HTML, PDF, DOC, dashboard and so on. - Text-based user interface, e.g. Command-line interface -&gt; notebook interface - Graphical user interfaces (GUIs) VS. Sonic user interface - Natural language user interface - Tangible user interface, e.g. Touch user interface - Rmd, [&quot;stevetemplates&quot;](https://github.com/svmiller/svm-r-markdown-templates), File-&gt; New File-&gt; R Markdown-&gt;From templates - R Markdown()LatexPDF, word, html, slides - R Shiny (), githubtemplates -  Markdown (markup language): a lightweight markup language (like HTML) Markdown (R package): the predecessor of rmarkdown, converts .Rmd files into HTML R Markdown (R package):  rmarkdown and knitr R Markdown (markup language): .Rmd file that is an excellent literate programming and reproducible research - **Knitr** converts - An .Rmd -&gt; .md - An .Rnw(Sweave) -&gt; .tex - An .Rhtml -&gt; .html - After Knitr works, then **Pandoc** converts md/tex/html into various formats as PDF/HTML/Word/. ## Plot/graph/visualisation - Install.packages(&quot;Shinytableau&quot;) Create Tableau(Power BI) Dashboard Extensions With R Shiny() - lattice: focus on multivariate data, and in particular to produce &quot;small multiple&quot; plots -    pdf(d:/xx.pdf)  dev.off() // now output tiff(600dpi) tiff(file = C:/test1.tiff, res = 600, width = 4800, height = 4800, compression = lzw) plot(1:22, pch = 1:22, cex = 1:3, col = 1:5) # dev.off() ## Data -  c() #Combine Values into a Vector or List M &lt;- vector(length=8) #vector8 read.table() #txt - library(foreign) write.dta(data,d:/test.dta) # Stata12 write.csv(desmat, file = D:/desk/UNSW/DCE/haze_desmat.csv) # csv rbind(a1,a2) # rows bind  cbind(a1,a2) # column   xls  xlsx  xlsx / XLConnect -   if(condition){}/else if(condition){} /else{}  for(name in expr_1){ expr_2} | while(condition){expr} | repeat { expr;break } break  next -  A &lt;- matrix(1:15,nrow=2,ncol=4,byrow=TRUE) #, Aint A [,1] [,2] [,3] [,4] #[1,][,1] [1,] 1 2 3 4 [2,] 5 6 7 8 cell &lt;- c(3,5,4,5,6,1,1,4,6,7) A &lt;- matrix(cell,nrow=2,ncol=4,byrow=TRUE) #Anumeric x&lt;-1:5; y&lt;-2*1:5 #,2 4 6 8 10 crossprod(x,y) #,110 outer(x,y) #,5x5 t(x) #xtranspose A&lt;-array(1:9,dim=(c(3,3))) #arrays  B&lt;-array(9:1,dim=(c(3,3))) AB #: A%%B #: crossprod(A,B) #:t(A)%*%B apply(M,,FUNction)A&lt;-matrix(1:6,nrow=2);apply(A,1,sum) x[-3] #3 x[c(3,5)] #x35 sort(x) # order(x) # X1 &lt;- c(21.3, 19.9, 22.4, 24.1, 25.9) X2 &lt;- c(32.1, 27.8, 30.1, 29.9, NA) #mean(X2)mean(X2,na.rm=TRUE) is.na(X2) # ID &lt;- rep(1:4,each=8) #rep()32 seq(1, 9, by = 2) rep() ID &lt;- rep(c(X1,X2,X3),c(3,2,1)) # -  .VS.  - (categorical) - Rfactor&quot;&quot; -  - factor() - levels() - table() -  is.numeric(X) is.character(X)  as.character(X), as.numeric(X)  length(X)&lt;- attributes(object) attr(object,) - R mode(x) # dim(x) # length(x) # e.g. d.medlist mode(d.med) length(d.med) attributes(d.med) head(d.med) dd&lt;-as.data.frame(d.med\\(nalternatives\\)alt.1) #d.meddd - R R X assign(, X); &lt;- X; X -&gt;; # paste(X,Y) #, complex() #  data frame // Statamode data.frame() # as.data.frame() # attach() # attach()with() detach() # Dfm\\(We #DfmWe\\)(dollar,at) DataAll &lt;- list(Bird=bid.8, ID=ID, Z=Z) #list=,&lt;-  list list() - attach() $ accountants$statef attach(accountants)accountants -  list() &gt; x = list(name=Fred, wife=Mary, no.children=3, child.ages=c(4,7,9)) &gt; x $name [1] Fred $wife [1] Mary $no.children [1] 3 $child.ages [1] 4 7 9  x[[1]] [1] Fred x[1][1] $name [1] Fred x[name][1] \\(name [1] &quot;Fred&quot; x\\)name [1] Fred -  L3 = LETTERS[1:3] L3 [1] A B C d = data.frame(cbind(x = 1, y = 1:10), fac = sample(L3, 10, replace = TRUE)) d x y fac 1 1 1 B 2 1 2 A 3 1 3 C 4 1 4 C 5 1 5 B 6 1 6 A 7 1 7 A 8 1 8 B 9 1 9 B 10 1 10 A d$x [1] 1 1 1 1 1 1 1 1 1 1 d[[2]] [1] 1 2 3 4 5 6 7 8 9 10 d[1][1] x 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 1 10 1 ## Install R/RStudio - Rstudio Rstudio is IDE of R, needs setup of R before. Rstudio-&gt;tools-&gt;Global options-&gt;[R](D:\\R\\R-Portable\\App\\R-Portable) - R, packages install.packages(c(&quot;apollo&quot;, &quot;arm&quot;, &quot;backports&quot;, &quot;BayesLCA&quot;, &quot;bibtex&quot;, &quot;bit&quot;, &quot;bit64&quot;, &quot;bitops&quot;, &quot;BMA&quot;, &quot;brio&quot;, &quot;caret&quot;, &quot;caTools&quot;, &quot;cli&quot;, &quot;colorspace&quot;, &quot;curl&quot;, &quot;data.table&quot;, &quot;deSolve&quot;, &quot;diffobj&quot;, &quot;digest&quot;, &quot;dotCall64&quot;, &quot;dplyr&quot;, &quot;e1071&quot;, &quot;effects&quot;, &quot;ellipsis&quot;, &quot;expm&quot;, &quot;fansi&quot;, &quot;farver&quot;, &quot;fastmap&quot;, &quot;fields&quot;, &quot;fs&quot;, &quot;gert&quot;, &quot;git2r&quot;, &quot;glue&quot;, &quot;gmp&quot;, &quot;gower&quot;, &quot;gsynth&quot;, &quot;haven&quot;, &quot;hdrcde&quot;, &quot;Hmisc&quot;, &quot;htmltools&quot;, &quot;httpuv&quot;, &quot;ipred&quot;, &quot;isoband&quot;, &quot;jpeg&quot;, &quot;jsonlite&quot;, &quot;ks&quot;, &quot;later&quot;, &quot;latticeExtra&quot;, &quot;lfe&quot;, &quot;lme4&quot;, &quot;lmtest&quot;, &quot;lubridate&quot;, &quot;magick&quot;, &quot;magrittr&quot;, &quot;maps&quot;, &quot;maptools&quot;, &quot;Matrix&quot;, &quot;matrixStats&quot;, &quot;mclust&quot;, &quot;MCMCpack&quot;, &quot;memisc&quot;, &quot;mime&quot;, &quot;mnormt&quot;, &quot;msm&quot;, &quot;multicool&quot;, &quot;mvtnorm&quot;, &quot;nloptr&quot;, &quot;openssl&quot;, &quot;partitions&quot;, &quot;pcaPP&quot;, &quot;pkgload&quot;, &quot;pROC&quot;, &quot;processx&quot;, &quot;promises&quot;, &quot;proxy&quot;, &quot;ps&quot;, &quot;quantreg&quot;, &quot;randtoolbox&quot;, &quot;rappdirs&quot;, &quot;Rcpp&quot;, &quot;RcppArmadillo&quot;, &quot;RcppEigen&quot;, &quot;RCurl&quot;, &quot;readr&quot;, &quot;readstata13&quot;, &quot;rgl&quot;, &quot;rJava&quot;, &quot;rlang&quot;, &quot;rngWELL&quot;, &quot;robustbase&quot;, &quot;RODBC&quot;, &quot;roxygen2&quot;, &quot;rrcov&quot;, &quot;sass&quot;, &quot;sem&quot;, &quot;slam&quot;, &quot;sp&quot;, &quot;spam&quot;, &quot;SparseM&quot;, &quot;statmod&quot;, &quot;stringi&quot;, &quot;sys&quot;, &quot;testthat&quot;, &quot;tibble&quot;, &quot;tidyr&quot;, &quot;tidyverse&quot;, &quot;tis&quot;, &quot;utf8&quot;, &quot;vctrs&quot;, &quot;VGAM&quot;, &quot;VGAMdata&quot;, &quot;vroom&quot;, &quot;XLConnect&quot;, &quot;XML&quot;, &quot;xml2&quot;, &quot;zip&quot;, &quot;zoo&quot;)) -  install.packages(support.CEs) #support.CEsDCEpackage install.packages(,lib=,repos=) search() # detach(package:) # data() # data(package = ) # .libPaths() #library - helptry.all.package=TRUE  help(bs,try.all.package=TRUE); # Package Library splines E: help(bs,package=splines); help.search(tree); #treeapi -  ?plot # , or help(plot) ??vegan # help.search(rnorm) # search help files, even wrong spelling args(rnorm) # get arguments RSiteSearch(discrete choice experiment) # -  functionconsole damnN methods() summaryaov methods(summary) summary.aov - IO object.size # setwd(D:/R/DCE) # getwd() #working directory dir() # - Console ctrl+L - semi-colon (;) to put multiple statements on one line  -  Type `library()`packages Type `library(survival)` , Type `data()`:R - PATH- Sys.getenv(PATH) Warning message: In normalizePath(path.expand(path), winslash, mustWork) : path[1]=D:/????: The filename, directory name, or volume label syntax is incorrect ``` "],["python.html", "Chapter 5 Python 5.1 Network science(complex network) 5.2 Plot and visualisation", " Chapter 5 Python 5.1 Network science(complex network) NetworKit is a growing open-source toolkit for large-scale network analysis. This moduler includes standard measures of network analysis, such as degree sequences, clustering coefficients, centrality measures, and more. 5.2 Plot and visualisation PlotlyPython(bokeh)/(Jupyter Notebook )Python, MATLAB, R Python: 1. cufflinks+express+plotly; 2. bokeh+hvplot : ggplot() -&gt; plotly() -&gt; cufflinks : matplotlib() -&gt; seaborn "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
