[["index.html", "My Notebook Chapter 1 Intro 1.1 2022 1.2 2010-2012", " My Notebook CTang 2022-02-11 Chapter 1 Intro This notebook covers my daily improvements in both knowledges and skills. 1.1 2022 1.1.1 Feb Debug: RStudio couldnt work well if R libraries are synchronized, Im considering transfer the platform to RStudio Cloud, like Deepnote-Python. 1.1.2 Jan  Do I need to apply for ethics approval? In cases where data are collected for the purpose other than research, you might not need to submit an ethics application. This might be the case if your project falls into one of the following categories of data collection or use: Archival data, if it is from a public domain Please note, you will have to apply for ethics approval if the information you intend to use is identified personal information (states or implies identity), not in a public domain or if you will collect data in addition to the archival research. Administrative data collection Collection of data from staff or other stakeholders for the purposes of informing or improving a process within your organisation is not considered research. Still, if you later decide to use this data for research purposes, you will need to apply for ethics approval. In addition, the use of identified data always requires ethics approval. Teaching and learning If you collect human data solely for teaching or learning purposes and do not expect to publish or present any data, no ethics application is necessary. However, if you think the project may be published, it is recommended that you apply for ethics approval before running the project, as this is easier than getting approval subsequently. Quality assurance or clinical audit Usually data collected for quality assurance purposes or an audit, does not require ethical review, if it is for your organisations own information. However, if information is to be taken outside the organisation and used for a published paper, research project etc, this is considered research and requires ethical review. Negligible risk research involving collections of non-identifiable data Your research involves negligible risk if you use existing non-identifiable data or records or if it does not involve any foreseeable risk of harm or discomfort, which means there must not be the possibility of anything more than inconvenience. Although in this case you are not required to apply for ethics approval, you will probably need to complete a form to confirm that the project is of negligible risk, and provide a letter (or similar evidence of approval) from the person in charge of the data. 1.2 2010-2012 1.2.1 825 2012 2012-08-09  Win episcope  error bar chart 84-91-205 Approximately=a number of=some  me 0404142385 bao 0404151559 PassPort: G55112399 1/28 FORSYTH STREET, Kingsford, NSW, 2032 2816 chengxiang Essays on Physicians Choice Changes in drug utilization following the outpatient prescription drug cost-sharing programevidence from Chinas Win episcope  error bar chart 84-91-205 Approximately=a number of=some bao 0404151559 PassPort: G55112399  1/28 FORSYTH STREET, Kingsford, NSW, 2032 13540617813 LCAmodelschoice model, class membership model R BayesLCAlatent class model White, A. and T. B. Murphy, et al. (2014). BayesLCA: An R Package for Bayesian Latent Class Analysis. Journal of Statistical Software 61 (13). air quality improvement, latent class, preference heterogeneity: prefer status quo, prefer change?? One observable determinant of this preference heterogeneity is the exposure of individuals to health risks relating to air quality   925452379636 how to divide classes in public and private hospital study: public-oriented, non-public-oriented patients DCE topics: organ transplant, blood transfusion, drunk driving, weather and agriculture outcome health &amp; policy focus on health shock + regression discontinuity labor focus on tournament theory 3 the health and health expenditure impacts of prostitution regulation in aus http://en.wikipedia.org/wiki/Prostitution_in_Australia http://en.wikipedia.org/wiki/Prostitution_and_the_law#Victimhood_issues      Bernoulli  u(x)=X^1/2 g=(1/216, 1/24)  Certainty Equivalent: c(1/2)=1/216^(1/2)+1/24(1/2)c=9; Probablility Premium:(1/2+x)(10+6)(1/2)+(1/2-x)(10-6)(1/2)=(10)^(1/2)x=[10^(1/2)-3]/2,probability premium,10.  : CLOSED FORM SOLUTION , ()  G Bloom, T Evens, W Hsiao, . ,,. :,,,,.,,.,,,,. ,,,,.,,,,.,.. ,,,,,,. ()  http://www.sciencedirect.com/science/article/pii/S016885101100114X Human Capital http://www.nber.org/papers/w17474.pdf distance http://www.nber.org/papers/w17471.pdf we own more knowledge, but use less   Defenders of the new law invariably ignore the supply side of the market. They assume that if you insure the uninsured or give people more generous coverage that they will all get more health care without ever asking: who is going to provide that extra care? Purports to control total spending on physician services, but it controls only prices, even though spending is the product of the price and the number and intensity of services. Weve seen that diagnostic imaging costs more in the U.S than elsewhere, but what about physician fees? This is arguably the most subjective part of the health care system. For example, do some countries value their physicians more than others? What about the emphasis on primary care versus the various specialties?  health care price physician specialization price regulation medical profession specialization regulation primary care physician specialization health economics labor division topics in medical economics specialization division of labor physician division of labor physician specialization physician fees Physicians can sell prescriptions directly to patients. Unsurprisingly, Japan has the highest consumption rate of pharmaceuticals per capita in the world. ,., ,.,,,..,,,, FDA(Generic Drugs)(brand-name drugs)(OTC) Approved Drugs * How is medicine approved by FDA? * How can I find out if my medicine is approved by FDA? Side Effects * How can I find out about side effects or safety concerns for my drug? * Do drugs have risks? * How do I report a suspected drug side effect Treatments for Medical Problems * What approved drugs are available to treat my disease? * Since FDA cannot provide information about drugs in development, where can I go to learn more about them? Generic Drugs * What are generic drugs? * Is there a generic equivalent for my brand-name drug? * Are generic drugs as effective as brand-name drugs? Prescription Drugs and Over-the-Counter (OTC) Drugs * What is the difference between prescription drugs and OTC drugs? Dietary Supplements * What is a dietary supplement? * Where can I find information about dietary supplements?   SPD Modern prescriptions evolved with the separation of the role of the pharmacists from that of the physician  GP-physiciandoctor-pharmacist messy Du lipingProfessional Code or Legal Sanctions: Pharmacy in ChinaKremers and Urdangs History of pharmacy By Edward Kremers, Glenn Sonnedecker  GP-physiciandoctor-pharmacist fixed price system  Follandversion6338physicianphysicianmedical professions  ·       Gary S. Becker  There are 6 features which contribute to the benefits on a popoulations health, associated with primary care. (Starfield et al., 2005) These benefits are improved access to services, improved quality of care, more emphasis on prevention, early management of health problems, combined effect of primary care delivery characteristics and the role of primary care in reducing unnecessary and potentially harmful specialist care. (Starfield et al., 2005) General practice was first introduced into parts of urban China in 1999. (Liu, 2005) CHC was introduced in 1998. (Pan et al., 2006) a major determinant of a patients satisfaction with care provided is their initial expectations, which can be shaped by a number of variables, including socio-demographic and socioeconomic factors, past experience, needs, and word-of-mouth influence. (Tam, 2007)Recently research seeking to understand patients perspectives has moved from asking about patient satisfaction, which can be difficult to interpret to enquiring about patient experiences with healthcare. (Davies and Cleary, 2005) The John Hopkins PCATs four main domains assess the structure and process of primary care service provision The John Hopkins Primary Care Assessment Tool was selected for use to assess patients experience of quality. Measuring patient experience of quality rather than patient satisfaction was a key feature when choosing the research instrument, given increasing dissatisfaction with measuring patient satisfaction, due to difficulty in interpreting patient satisfaction results. (Berendsen et al., 2009; Davies and Cleary, 2005) As part of the calculation of sub domain scores a score of 9 - not sure, was converted to a score of 2.5 for all sub-domains, except comprehensiveness, where a score of 9-not sure was converted to 0. Instead, during the interviews the research assistant conducted the interview and the translator translated the main points of the interview as the interview was ongoing. This allowed the opportunity to ask some questions as the interview progressed. Roziextent of affiliation ongoing care 6PCPz5 gp  rgp4JAMA rozi 1 2UKGP 3CHC3-4Rhealth records 120 FDAwhich determines effectiveness of a drug regardless of cost NICEwhich determines not only whether a drug is effective, but whether these health improvements are worthwhile considering the drugs cost.   8500   EBSCOOVIDProQuest ElsevierScienceSpringerJohn Wiley --Dialog OCLC FirstSearchScopus EBSCO paper  essaypaperpaper 1.2.2 2011524  Visa/Passport information  whenever  Proof of English Ability  Notarised/Certified Transcript  Details of previous research  Sponsorship Letter You must download the Sponsor Contract Form, which must be completed and submitted to the relevant Admissions Office.    Research Plan  Proof of contact with supvsr   Curriculum Vitae 1.visa~  2.  Sponsorship Letter Will you be sponsored by an Official UNSW Sponsor ?NOyes ucf offer 1  2  3  4  5  Rice  offerfunding 20000GTA+5000summer fellowship,  3000  offeroffer20000 2. 3PHD coordinator, positiveoffer, negtive   4 5 6 7 letters of recommendation should address your potential as a scholar based on their experience with you as a student, research assistant, or teaching assistant. Non-Service ScholarshipService AssistantshipFellowshipScholarshipTuition &amp; Fee WaiverAwards 1FellowshipFellowship 2ScholarshipScholarshipScholarshipFellowshipScholarshipScholarship 3Tuition &amp; Fee WaiverScholarships, Teaching AssistantshipTAResearch AssistantshipRAOn-Campus JobTA/RA12-2023TA/RA (On-Campus Job)5.152040 1.2.3 201010 UGA HPM PhD        1 2 3 50      ,  Philosophy of economics, economic methodology, history of economics, relation of economics to social values, social economics, ethics and economics, health economics, international economics. Philosophy and Methodology of Economics, History of Economics, International Economics, Ethics and Economics, Health Economics. -EMS-155, 6 DHL-  951-2 + 86 (591) 87321111 350007  800-810-8000 GRE NO.2, ,, -ive GRE  1.2.4 825   Win episcope (universally true, but not obvious)  10.100.246.38 / 254 10.46.2.16 263 My confirmation number is 8850000000499691. REGISTRATION NUMBER: 6610367 confirmation  1.85+1.45 --- 1.2.5 627 1 2 3PS the most important character trait in research is not intelligence, but self-disciplin. So, if you want prove that you have potential, prove that you have the fortitude to take on the system 217-4184643  Food Science and Engineering Food Sci &amp; Engineering Business Administration Social Medicine &amp; Health Administration 09/01/2002 09/01/2004 06/30/2006 baccalaureate degree Fujian Medical University 09/01/2008 06/30/2011 Lieping Chen clpqsc@126.com Fujian Medical University 0086-13763834045 Weiguang Zhang zwguang@swu.edu.cn Southwest University College of Food Science 13983485159 Rosalind McCollum Concern Worldwide rosalind.mccollum@concern.net Ireland Chongqing Southwest University Attended From 09/01/2002 To 06/30/2006 Degree Bachelor of Engineering Received 06/30/2006 Southwest University Attended From 09/01/2004 To 06/30/2006 Degree Bachelor of Business Administration Received 06/30/2006  Advanced Mathematics-2002, Probability Theory-2003, Linear Algebra-2003, Microeconomics-2004, Macroeconomics-2004, Medical Statistics-2008, Health Economic-2009 VB Programming(2004) 5187 0000 EMORY U GRAD SCH 2074 1903 CARNEGIE MELLON UNIVERSITY PUBLIC POLICY STUDIES 1565 0000 NORTHWESTERN UNIVERSITY 5816 0616 U NORTH CAROLINA CHAPEL HILL PUBLIC HEALTH  Chengxiang Tang MHA. Candidate School of Public Health, Fujian Medical University 88 Jiaotong Road, Fuzhou, Fujian, 350004, PRC Cell: 860591-13705914418 Email: tang.chengxiang@gmail.com primary care, provider, rual area, Health Manpower ManagementMerged with Journal of Management in Medicine in 1999 key words human resources for health  heath human resources  health workforce health staff health manpower 90 Health Personnel Personnel &amp; human resources management Personnel management "],["bat-excelword-lyxlatex.html", "Chapter 2 bat, Excel/Word, Lyx/Latex 2.1 bat 2.2 Excel/Word 2.3 Lyx/Latex", " Chapter 2 bat, Excel/Word, Lyx/Latex 2.1 bat A batch file(.bat ) is a script file in DOS, OS/2 and Microsoft Windows. It consists of a series of commands to be executed by the command-line interpreter, stored in a plain text file. build a new project project D:_buildfolder.bat  SET log=.\\output\\rundirectory.log :: Clear output and externals DEL /F /Q .\\output\\ :: delrd. rd Filemon ::  /q /s :: filemonbat RMDIR .\\external /S /Q MKDIR .\\external :: Log start ECHO rundirectory.bat started &gt; %log% ECHO %DATE% &gt;&gt; %log% ECHO %TIME% &gt;&gt; %log% DIR .\\output\\ &gt;&gt; %log% :: Get externals SET rev=4 SET svnpath=https://booth.svn.cloudforge.com/svndemo/trunk/ SVN export &quot;%svnpath%/analysis/output/regressions.tex@%rev%&quot; &quot;./external/regressions.tex&quot; --force -r%rev% &gt;&gt; %log% SVN export &quot;%svnpath%/raw/data/potato.dta@%rev%&quot; &quot;../external/potato.dta&quot; --force -r%rev% &gt;&gt; %log% SVN export &quot;%svnpath%/raw/data/tv.dta@%rev%&quot; &quot;../external/tv.dta&quot; --force -r%rev% &gt;&gt; %log% :: Compile the paper PDFLATEX .\\source\\tv_potato_submission.tex -output-directory=.\\output\\ &gt;&gt; %log% :: Delete auxiliary files DEL .\\output\\tv_potato_submission.aux .\\output\\tv_potato_submission.log :: Merge files, clean resulting data set &quot;D:\\stata13_SE_unsw\\StataSE-64&quot; /e do mergefiles.do &quot;D:\\stata13_SE_unsw\\StataSE-64&quot; /e do cleandata.do :: Run regressions &quot;D:\\stata13_SE_unsw\\StataSE-64&quot; /e do &quot;D:\\svndemo\\branches\\analysis (alternative regressions)\\code\\regressions.do&quot; :: Append log files COPY %LOG% + regressions.log %LOG% DEL regressions.log :: Log end ECHO rundirectory.bat completed &gt;&gt; %log% ECHO %DATE% &gt;&gt; %log% ECHO %TIME% &gt;&gt; %log% bat ren aaa.txt bbb.doc :: aaa.txt  bbb.doc ren [Drive:][Path] filename1 filename2 cd.dllwindows copy cd.dll %windir%  start explorer D:and Inst  start D:_SE_unsw-64.exe D:and Inst\\0prog_IFRS.do -noteexpress start  D:.nel  start  D:\\03090561111137697.pdf ::pdf 2.2 Excel/Word Word: Ctrl+A()Ctrl+Shift+F9() Excelword, : WORD *0 ^? ^# ^$ ^&amp;   [!1-127]  =RANDBETWEEN(0,1) //01binary =round(rand()2 //0-1 excel alt+ excel,   =SUM(1/COUNTIF(D2:D477,D2:D477))  ctrl+shift+enter  excel   alt+F11VBE Sub 4() Do While ActiveCell &lt;&gt; &quot;&quot; ActiveCell.Offset(1, 0).Resize(4, 1).EntireRow.Insert shift:=xldowm ActiveCell.Offset(5, 0).Select Loop End Sub Alt+QExcel, Alt+F8 ; (4,1)(5,0) [!1-127] 200908052009 08 05 =REPLACE(REPLACE(A1,5,, ),8,, ) =TEXT(A1,0000 00 00) EXCEL- yyyy-mm excel1919xx19 excel-  Excel&amp;  ABS   AND TRUETRUE  FALSE  AVERAGE   COLUMN   CONCATENATE   COUNTIF   DATE   DATEDIF   DAY  DCOUNT   FREQUENCY   IF   INDEX   INT   ISERROR TRUEFALSE  LEFT   Left(A1, 2) LEN   MATCH   MAX   MID   MIN   MOD   MONTH   NOW   OR FALSEFALSETRUE  RANK   RIGHT   SUBTOTAL   SUM   SUMIF   TEXT   TODAY   VALUE   VLOOKUP   WEEKDAY   2.3 Lyx/Latex 2.3.1 Lyx Lyxarticle settingDocument ClassClass OptionsCustomUTF8ctex, encodingUnicode(XeTeX) (utf8) Lyx ctrl+D or ctrl+R LaTeX PreambleLaTeX  \\usepackage{xeCJK} \\setCJKmainfont{SimSun} View&gt;View[pdf(XeTeX)]ctrl+R article:  File &gt; New   Document&gt; Settings Document class CTeX CTeX Language Chinese (simplefied)Encoding  Unicode (XeTeX) (utf8) LyX XeTeXxeCJK outputDefault output format  PDF (XeTeX)XeTeXLyX PDF 2.3.2 Latex pdfpages \\includepdf\\includepdfset{pagecommand={}}include  \\(-\\) % \\item \\item[] %  pdf \\begin{figure}[htbp!] \\centering \\includegraphics[width=12cm]{./output/Pat_see_Doc_on_expected_profit.pdf}\\\\ \\caption{Patients&#39; decision to see Doctor (get diagnosis) on expected profit} \\label{fig2} \\end{figure} latex  \\usepackage[inline]{trackchanges}  \\addeditor{Tang}; latex \\note[Marian]{.} latex-caption- ^,  \\textsuperscript{1} latexoutput \\input{./output/filename.tex} : \\(\\theta\\) or $\\theta$ online latex: sharelatex .vs. writelatex writelatex google account,  bib, &amp; ,  \\&amp;, e.g. Journal of Economic Behavior \\&amp; Organization  \\label \\caption  ,  latex \\input{} new page \\include{} new page pdf \\usepackage{pdfpages} \\includepdf[pages=-]{myfile.pdf} latex \\documentclass[a4paper] {article} \\usepackage{booktabs} % \\toprule \\usepackage{multirow} %  \\usepackage{array} % cell width \\usepackage{pdflscape} % \\begin{landscape} \\usepackage{longtable} \\usepackage{caption} % longtable caption center latex \\toprule % \\hline \\midrule \\cmidrule{2-9} % 2-9columns \\bottomrule %-- \\hline %hline \\chline{2-9} latexcells latexcells \\multicolumn{1}{l}{} \\multicolumn{&#39;num_cols&#39;}{&#39;alignment&#39;}{&#39;contents&#39;} \\multicolumn{1}{p{2cm}}{CL} % p{} \\multirow{&#39;&#39;num_rows&#39;&#39;}{&#39;&#39;width&#39;&#39;}{&#39;&#39;contents&#39;&#39;} \\multirow{2}{2cm}{CL} %  latexcells- \\hspace{5cm} latexcells  $^1$ latexcells _  \\_ latexcells &gt;  \\textgreater latexcells &lt;  \\textless latexcells =  1, : ``AAAA  caption{} \\label{ch:xx} % ch=chapter chapterPhD Figure \\ref{ch:xxx}  wordnoteexpress\\cite{xxx} \\newpage \\nocite{CurrieRossin-1756, AlmondCurrie-1194, CurrieStabile} %NoteExpress \\bibliographystyle{alpha} %reference \\bibliography{fluo.bib} %BibtexNoteExpress citation: \\usepackage{natbib}  http://www.reed.edu/cis/Help/LaTex/images/natbibA-Ncitations.png  (\\citet*{}, \\citep*{} ) \\citet{} % text  \\citep{} %  (Lim and Yang et al., 2004; Tang and Zhang et al., 2014)  \\textit{}  {\\it xxxx}  \\textbf{}  {\\bf xxxx}  \\underline{}  \\usepackage{setspace} \\begin{spacing}{2.0} \\end{spacing}  \\begin{align*} &amp; equation 1 \\\\ &amp; equation 2 end{align*} \\begin{equation} \\label{eq:erl} a = bq + r \\end{equation} where \\eqref{eq:erl} is true if $a$ and $b$ are integers with $b \\neq c$. 3: 1. %; 2.  \\iffalse .... \\fi ; 3.  \\begin{comment} ... \\end{comment} -- \\usepackage{verbatim}. $&gt;$  $\\vert$  latex + dvipdfmx epspdfpngjpg   \\tiny \\scriptsize \\footnotesize \\small \\normalsize \\large \\Large \\LARGE \\huge \\Huge  \\hspace{1cm}  \\vspace{1cm} quad a \\qquad b m quad a \\quad b m  a\\ b 1/3m  a\\;b 2/7m  a\\,b 1/6m  ab  a\\!b 1/6m Q: Beamerpdflatexepsepspdfbeamereps A: epsbeamerdvi-ps-pdf texTexify,dvi dvi2psps ps2pdfpdf "],["r_onlinebookdashboard.html", "Chapter 3 R_Onlinebook/Dashboard 3.1 Online data collection/transfer 3.2 Building online book(Bookdown) 3.3 Building single page(robobook) 3.4 Building Dashboard(Flexboard) 3.5 Building website wt multi-pages(Blogdown)", " Chapter 3 R_Onlinebook/Dashboard 3.1 Online data collection/transfer Ideally, or the perfect situation, is that we collect and summarise data from internet, clean data, analyse data, and present outcomes online. Data infrastructure of Australia library(aurin) is Australias single largest resource for accessing clean, integrated, spatially enabled and research-ready data on issues surrounding health and wellbeing, socio-economic metrics, transportation, and land-use. This package provides functions to download and search datasets from the AURIN API (its free to use!). There is an example in aurin website showing access data, obtain data through this API. R rvest: Easily Harvest (Scrape) Web Pages   RRCurlXML pythonrequestsBeautifulSoup R Rfacebook: facebook XML(eXtensible Markup Language), , ,  YAML(.yml files, Yet Another Markup Language) is the metadata that tells R Markdown, pandoc, and other software exactly how to process or display the document What is the difference between YAML and JSON? YAML is a superset(.VS subset) of JSON 3.2 Building online book(Bookdown) This tutorial will show us easiest way to build an online book (or a book-style website) through RStudio and GitHub (may also by bookdown.org). Well call this book BB. 1) Start on local computer Copy folder D:_template(this version is from Jules32, much easier than Yihuis bookdown-demo) to a reasonable place Rename 2 things from bookdown_template to BB: the folder itself the .Rproj file Double-click the .Rproj file to launch RStudio Click on the Build tab in the top right pane to build book 2) Create BB GitHub repo Go to your GitHub account: github.com/username Click on Repositories, and the green button New to create a new repo Name this new repo BB (DO NOT initialize this repo with a README) Click the green create repository button, then copy URL 3) Turn bookdown_template into BB Go back to RStudio, see your BB project In the Console, type usethis::use_git() and say Yes to the two prompts. This will restart R and give you a new Git tab in the upper right pane. Now, click on the Terminal tab next to the Console tab. Type git remote add origin URL Type git push --set-upstream origin master (this sentence upload files) 4) Publish BB (Last step) Refresh github, then files should be there! Click Settings Scroll down to GitHub Pages, click Check it out here Change the Source pulldown from None to master branch /docs folder It should say Your site is ready to be published at https://username.github.io/BB/ 5) Sync/Update online book in Github Rstudio to build(knitr) the whole book, including all .Rmd files In Build panel, click Build Book or in Console, type rmarkdown::render_site(encoding = 'UTF-8') In Git panel, select all files, click Commit, appears a new window Input XX changes, click Commit Click the staged checkbox for the modified files you want to commit to GitHub repository Finally, click Push -&gt; Done! PS1: we ignore Travis and related continuous integration() here, actually now Yihui uses Makefile and _render.R instead. PS2: Sync btw local RStudio and RStudio Cloud using Git: - because there are three copies saved in local/RStudioCloud/GitHub, if we used RStudio Cloud and sync it with GitHub, then we first need to pull/merge at local PC (commit 1), and push local changes to GitHub (commit 2). 6) Writing and adding chapters(.Rmd) and citations Build a new .Rmd file, name it and begin writing. As Index.Rmd is always the first chapter, we start ordering from 02-xx. For citations, The appearance for coding chunks are different btw two types below (the second is more obvious): %%xx % %r %xx % 3.3 Building single page(robobook) In above chapter Building online book(Bookdown), multiple *.Rmd and .md files, along with a site YAML file(vs. YAML header), as input, a multipage website or book with internal navigation as output. (This is how the course web pages are constructed.) If we dont need a book structure, but a single page with a structured-table(especially good for a report). We use 1) YAML header and 2) first code chunk in a single .Rmd, with outputing a single HTML. The template robobook is great for reading. --- title: &quot;&quot; date: &quot;2022-02-11&quot; #outputmultiple .Rmd files_output.yml # bookdown::gitbook:  rmdformats::robobook: output: rmdformats::robobook: code_folding: show self_contained: true default_style: &quot;light&quot; downcute_theme: &quot;default&quot; --- #```{r setup, include=FALSE} #First code chunk setting global options #knitr::opts_chunk$set(cache = TRUE) #``` PS: Rmd has many excellent templates: rticles(journal papers), prettydoc(html), rmdformats(online book, e.g. robobook style), tufte How to insert figures? For my notebook, all figures are saved in folder /NB_tang/figs. Using codes below: ![First code chunk](figs/fig_codechunk_opt.jpg){width=100%} First code chunk 3.4 Building Dashboard(Flexboard) some definitions Rmarkdown aims to develop your code and ideas in a reproducible document Shiny package aims building interactive web applications File -&gt; New File -&gt; Shiny uses .R file Flexdashboard package aims building interactive dashboards using Rmarkdown flexdashboardBookdownsingle page, topic flexdashboardsingle .Rmd(===panel, column, ###box) .RmdYAML header + first code chunk flexdashboard_site.yml as a simple site generator(rmarkdown, blogdownthird-party site generator like Hugo) This tutorial shows us how to build an online dashboard, using flexdashboard, with RStudio and GitHub. We call this project BB. 1) Start on local computer Copy folder D:_template to a reasonable place Rename 2 things from flexdashboard_template to BB: the folder itself the .Rproj file the _site.yml -&gt; name(website) Double-click the .Rproj file to launch RStudio Click on Knit to build website .html 2) Create BB GitHub repo(see Building online book) 3) Turn bookdown_template into BB(see Building online book) 4) Publish BB (Last step) 3.5 Building website wt multi-pages(Blogdown) Blogdown use the third-party site generator, Hugo. 1) Start on local computer Copy folder D: to a reasonable place "],["rstata_stated-preference.html", "Chapter 4 R/Stata_Stated Preference 4.1 Design &amp; SurveyApp 4.2 Estimating models 4.3 Latent Class() 4.4 Binary DCE(used as Case 2 BWS) 4.5 case 1 BWS", " Chapter 4 R/Stata_Stated Preference Stata mixed logit mixlogitwtp  bayesmixedlogitwtp Install.packages(logitr) This package can estimate MNL and MXL, derive WTPs from Preference space and WTP space. For details, see random utility model in two spaces Install.packages(mixl) This R package for estimating complex choice models (MXL) on large datasets How to refer to a variable name with spaces? : backticks `(), : RES ~Indirect payment+Direct payment+strata~ R Hideo Aizaki has an online book Non-Market Valuation with R 4.1 Design &amp; SurveyApp Install.packages(idefix) this R package combines designning DCE and dashboard implementing survey to collect data, all tasks can be conducted by using R and Github help dcreate //DCEEfficient designs 4.2 Estimating models Install.packages(apollo) Coding and data examples using Apollo 4.3 Latent Class() Install.packages(BayesLCA) An R package for bayesian latent class analysis : Three methods for fitting the model are provided, incorporating an expectation-maximization (EM) algorithm, Gibbs sampling and a variational Bayes approximation. 4.4 Binary DCE(used as Case 2 BWS) 3.4.3 Organ donation - Binary DCE(Lma method) BDCE Case 2 BWS Stata, R, DCEmed(medR) rsource, terminator(END_R) library(survival) library(stats) library(support.CEs) library(foreign) # for Stata dataset output % DCEattrs-levels med &lt;- Lma.design( attribute.names = list( consent = c(&quot;implicit&quot;, &quot;active&quot;), final = c(&quot;no&quot;, &quot;yes&quot;), reg = c(&quot;various&quot;,&quot;unique&quot;), quit = c(&quot;never&quot;, &quot;ask&quot;), death = c(&quot;brain&quot;,&quot;other&quot;), priority = c(&quot;no&quot;,&quot;yes&quot;), acknow = c(&quot;no&quot;,&quot;yes&quot;), payment = c(&quot;0&quot;,&quot;1w&quot;,&quot;2w&quot;,&quot;3w&quot;) ), nalternatives = 1, # create design for a BDCE nblocks = 4, row.renames = FALSE, seed = 987) % meddes36x1118choice set36alternatives(observations), % 11(2*5+1,51)alternative attributes(med) head(med) questionnaire(choice.experiment.design = med ) data&lt;-as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes write.dta(data,&quot;d:/test.dta&quot;) # BDCE attributes q() END_R use d:\\test.dta , clear 3.4.3  Binary DCE(Lma method) BDCE case 2 BWS rsource, terminator(END_R) library(survival) library(stats) library(support.CEs) library(foreign) # for Stata dataset output ################## questionnaire ############################# med &lt;- Lma.design( attribute.names = list(Place = c(&quot;Urban&quot;, &quot;Rural&quot;), Facility = c(&quot;Hospital&quot;, &quot;CHC&quot;), Mgment = c(&quot;Fsuppot&quot;, &quot;Psuppot&quot;), Material = c(&quot;Fully&quot;, &quot;Poorly&quot;), Style = c(&quot;Required&quot;, &quot;Not&quot;), Career = c(&quot;Sufficient&quot;, &quot;Limited&quot;), Income = c(&quot;2000&quot;, &quot;4000&quot;, &quot;6000&quot;, &quot;8000&quot;)), nalternatives = 1, # create design for a BDCE nblocks = 2, row.renames = FALSE, seed = 987) questionnaire(choice.experiment.design = med ) as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes % PS: 2 blocks, 16 questions in total, thus each one answer 9 questions (including one consistent test) ################## design matrix -- dm.med ############################# - Because from the above questionnaire, we can create two types of BDCE: - 1) No opt-out but include common alternative; - 2) Opt-out but no common alternative. # Here in DCE_med_spe, we choose 2). dm.med &lt;- make.design.matrix( choice.experiment.design = med, optout = TRUE, # include opt-out option categorical.attributes = c(&quot;Place&quot;, &quot;Facility&quot;, &quot;Mgment&quot;, &quot;Material&quot;, &quot;Style&quot;, &quot;Career&quot; ), continuous.attributes = c(&quot;Income&quot;), unlabeled = TRUE, # unlabeled design common = NULL, # do not include common alternative binary = TRUE) # BDCEs ################## Datasets combine: final = res + dm.med ############################# data(res) # Input respondent dataset (clean the consistent test question before input) /* res ID BLOCK q1 q2 q3 q4 1 1 1 1 1 0 0 2 2 2 1 0 0 1 3 3 3 1 0 0 1 4 4 4 0 1 0 0 5 5 1 0 1 0 0 6 6 2 1 1 0 1 */ final &lt;- make.dataset( respondent.dataset = res, # respondent dataset design.matrix = dm.med, # design matrix choice.indicators = c(&quot;q1&quot;, &quot;q2&quot;, &quot;q3&quot;, &quot;q4&quot;, &quot;q5&quot;, &quot;q6&quot;, &quot;q7&quot;, &quot;q8&quot;), detail = FALSE) write.dta(final,&quot;d:/test.dta&quot;) # BDCE attributes ################## Analysis #############################  END_R 3.4.3  BDCE , Lma method, BDCE case 2 BWS rsource, terminator(END_R) library(survival) library(stats) library(support.CEs) library(foreign) # for Stata dataset output ################## questionnaire ############################# med &lt;- Lma.design(attribute.names = list( Place = c(&quot;Urban&quot;, &quot;Rural&quot;), Facility = c(&quot;Hospital&quot;, &quot;CHC&quot;), Mgment = c(&quot;Fsuppot&quot;, &quot;Psuppot&quot;), Material = c(&quot;Fully&quot;, &quot;Poorly&quot;), Career = c(&quot;Sufficient&quot;, &quot;Limited&quot;), Job = c(&quot;Matched&quot;, &quot;Nonmatched&quot;), Patient = c(&quot;Good&quot;, &quot;Fair&quot;), Income = c(&quot;2000&quot;, &quot;4000&quot;, &quot;6000&quot;, &quot;8000&quot;)), nalternatives = 1, # create design for a BDCE nblocks = 2, row.renames = FALSE, seed = 987) questionnaire(choice.experiment.design = med ) as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes # PS: 2 blocks, 16 questions in total, thus each one answer 9 questions (including one consistent test) ################## Matched design matrix -- dm.med ############################# # Because from the above questionnaire, we can create two types of BDCE: 1) No opt-out but include common alternative; # 2) Opt-out but no common alternative. Here in DCE_med_spe, we choose 2). dm.med &lt;- make.design.matrix( choice.experiment.design = med, optout = TRUE, # include opt-out option categorical.attributes = c(&quot;Place&quot;, &quot;Facility&quot;, &quot;Mgment&quot;, &quot;Material&quot;, &quot;Career&quot;, &quot;Job&quot;, &quot;Patient&quot;), continuous.attributes = c(&quot;Income&quot;), unlabeled = TRUE, # unlabeled design common = NULL, # do not include common alternative binary = TRUE) # BDCEs ################## Datasets combine: ds.med = medspe + dm.med ############################# data(medspe) # Input respondent dataset (clear the consistent test question before input) ds.med &lt;- make.dataset( respondent.dataset = medspe, # respondent dataset design.matrix = dm.med, # design matrix choice.indicators = c(&quot;q1&quot;, &quot;q2&quot;, &quot;q3&quot;, &quot;q4&quot;, &quot;q5&quot;, &quot;q6&quot;, &quot;q7&quot;, &quot;q8&quot;), detail = FALSE) head(ds.rural1) # list head of the final dataset ################## Analysis  ############################# fm.rural &lt;- RES ~ Agr + Env + Rec + Area + Tax out.rural1 &lt;- glm(fm.rural, # is glm() the clogit in Stata ? family = binomial(link = &quot;logit&quot;), data = ds.rural1) summary(out.rural1) gofm(out.rural1) out.rural2 &lt;- glm(fm.rural, family = binomial(link = &quot;logit&quot;), data = ds.rural2) summary(out.rural2) gofm(out.rural2) mwtp.rural1 &lt;- mwtp(output = out.rural1, monetary.variables = c(&quot;Tax&quot;), nonmonetary.variables = c(&quot;Agr&quot;, &quot;Env&quot;, &quot;Rec&quot;, &quot;Area&quot;), nreplications = 1000, confidence.level = 0.95, method = &quot;kr&quot;, seed = 987) mwtp.rural1 mwtp.rural2 &lt;- mwtp(output = out.rural2, monetary.variables = c(&quot;Tax&quot;), nonmonetary.variables = c(&quot;Agr&quot;, &quot;Env&quot;, &quot;Rec&quot;, &quot;Area&quot;), nreplications = 1000, confidence.level = 0.95, method = &quot;kr&quot;, seed = 987) mwtp.rural2 str(mwtp.rural1$mwtps) MWTP_Rec1 &lt;- mwtp.rural1$mwtps[, &quot;Rec&quot;] MWTP_Rec2 &lt;- mwtp.rural2$mwtps[, &quot;Rec&quot;] mded.rec &lt;- mded(distr1 = MWTP_Rec1, distr2 = MWTP_Rec2, detail = TRUE) mded.rec par(mfrow = c(1, 2)) # not shown in SPMUR hist(mded.rec$diff, main = &quot;(a) Rec&quot;, xlab = &quot;Difference&quot;) MWTP_Area1 &lt;- mwtp.rural1$mwtps[, &quot;Area&quot;] MWTP_Area2 &lt;- mwtp.rural2$mwtps[, &quot;Area&quot;] mded.area &lt;- mded(distr1 = MWTP_Area1, distr2 = MWTP_Area2, detail = TRUE) mded.area hist(mded.area$diff, main = &quot;(b) Area&quot;, xlab = &quot;Difference&quot;) v0 &lt;- 0 Plan1 &lt;- c(1, 0, 0, 0, 20, 0) v1 &lt;- sum(out.rural1$coef * Plan1) (-1 / -out.rural1$coef[&quot;Tax&quot;]) * (v0 - v1) Plan2 &lt;- c(1, 1, 0, 0, 60, 0) v2 &lt;- sum(out.rural1$coef * Plan2) (-1 / -out.rural1$coef[&quot;Tax&quot;]) * (v0 - v2) set.seed(123) COEF &lt;- mvrnorm(out.rural1$coef, # coefficients vcov(out.rural1), # variance-covariance n = 1000) # number of replications V0 &lt;- rep(0, 1000) V1 &lt;- COEF %*% Plan1 # %*% is matrix multiplication C1 &lt;- (-1 / -COEF[, &quot;Tax&quot;]) * (V0 - V1) V2 &lt;- COEF %*% Plan2 C2 &lt;- (-1 / -COEF[, &quot;Tax&quot;]) * (V0 - V2) hist(C1, main = &quot;Case 1&quot;, xlab = &quot;Compensating variation&quot;) hist(C2, main = &quot;Case 2&quot;, xlab = &quot;Compensating variation&quot;) quantile(C1, c(0.025, 0.975)) quantile(C2, c(0.025, 0.975)) (-1 / -out.rural1$coef[&quot;Tax&quot;]) * (log(exp(v0) + exp(v1)) - log(exp(v0) + exp(v2))) par(mfrow = c(1, 1)) # not shown in SPMUR C3 &lt;- (-1 / -COEF[ ,&quot;Tax&quot;]) * (log(exp(V0) + exp(V1)) - log(exp(V0) + exp(V2))) hist(C3, main = &quot;&quot;, xlab = &quot;Compensating variation&quot;) quantile(C3, c(0.025, 0.975)) 4.5 case 1 BWS Two methods for constructing choice sets for case 1 BWS: OMED - two level orthogonal main-effect design BIBD - blanced incomplete block design (number of items)BIBD difference set find.BIB(trt = 16, k = 6, b = 16 ) find.BIB(trt = 15, k = 7, b = 15 ) find.BIB(trt = 13, k = 4, b = 13 ) # 11 or 13 items is the best! find.BIB(trt = 11, k = 5, b = 11 ) find.BIB(trt = 10, k = 4, b = 15 ) find.BIB(trt = 9, k = 3, b = 12 ) find.BIB(trt = 8, k = 4, b = 14 ) find.BIB(trt = 7, k = 3, b = 7 ) find.BIB(trt = 6, k = 3, b = 10 ) # 6items10 3items ########### 79,11itemscase 1 BWS items &lt;- c(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;) items &lt;- c(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;) items &lt;- c(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;) Organ donation - Results analysis by R (all output in D:) , Stata, 2Create dataset: final = res + bibd rsource, terminator(END_R) ####################### 13items2resres library(DoE.base) library(crossdes) # crossdes package find.BIBBIBD library(support.BWS) library(survival) library(foreign) ########################################################### %%% 1. Constructing choice sets &amp; Case 1 BWS questions (BIBD) - organ donation  ########################################################### set.seed(123) bibd &lt;- find.BIB(trt = 13, k = 4, b = 13) # BIBD isGYD(bibd) #  trtkb  %View(bibd) items &lt;- c(&quot;Media&quot;, &quot;Religion&quot;, &quot;Tradition&quot;, &quot;Legislation&quot;, &quot;Family&quot;, &quot;Experience&quot;, &quot;Self-decision&quot;, &quot;Consent&quot;, &quot;Withdrawal&quot;, &quot;Death&quot;, &quot;Allocation&quot;, &quot;Indirect payment&quot;, &quot;Direct payment&quot;) %final %%% 1). Preparing BWS questions # design.type = 2 means BIBD % bws.questionnaire(choice.sets = bibd, design.type = 2, item.names = items ) %%% 2). Create dataset &quot;final&quot; = res + bibd res&lt;-read.dta(&quot;D:/desk/Googledrive/fj_phs/data/res.dta&quot;) final &lt;- bws.dataset(respondent.dataset = res, response.type = 1, # row number format choice.sets = bibd, design.type = 2, # BIBD item.names = items) write.dta(final,&quot;d:/BWS_final.dta&quot;) %View(final) # list dat  ########################################################### %%% 2. Analyzing responses using &quot;The Counting Approach&quot; (output: 3 graphs) % two tables: 1.Disaggregated best-worst scores &amp; 2.Aggregated best-worst scores % 1,21n (n) % PS: StataR ########################################################### scores &lt;- bws.count(data = final) scores scores$aggregate data&lt;-as.data.frame(scores$aggregate) # medlist, alt.1attributes write.csv(data,&quot;d:/tab_BWS_aggregate_score.csv&quot;) # StataLatex %%%%% Figure 1 Distribution of simple BW scores by items BW &lt;- data.frame(scores$disaggregate$BW) BW &lt;- lapply(BW, factor, levels = c(-4:4)) # scores are transformed into a factor score.tables &lt;- lapply(BW, table) # table for each item ylimit &lt;- max(unlist(score.tables)) # max count among items pdf(&quot;d:/fig_BWS_bars_items.pdf&quot;) # open .pdf for output par(mfrow = c(4,4)) # create 4 x 4 figure regions, otherwise alarm of &quot;out of figure margin&quot; for(i in 1:13){ # draw graph for item 1-13 barplot(height = score.tables[[i]], main = items[i], # title xlab = c(&quot;BW score&quot;), # label for x-axis ylab = c(&quot;Count&quot;), # label for y-axis ylim = c(0, ylimit)) # limits for y-axis } dev.off() # output graph with pdf type %%%%%% Figure 2 Relationship between the mean BW score and its standard deviation Mean.BW &lt;- colMeans(scores$disaggregate$BW) Standard.Deviation.BW &lt;- apply(scores$disaggregate$BW, 2, sd) pdf(&quot;d:/fig_BWS_mean_SD.pdf&quot;) plot(x = Mean.BW, y = Standard.Deviation.BW, xlim = c(-3, 3), ylim = c(1, 2)) text(x = Mean.BW, y = Standard.Deviation.BW, pos = 4, labels = items) dev.off() %%%%%% Figure 3 Mean BW score per item in each cluster set.seed(123) kmeans &lt;- kmeans(x = scores$disaggregate$BW, centers = 2) kmeans$centers pdf(&quot;d:/fig_BWS_mean_ranking.pdf&quot;) barplot(height = kmeans$centers, names.arg = items , beside = TRUE, # draw juxtaposed bar legend = c(&quot;cluster.1&quot;, &quot;cluster.2&quot;), horiz = TRUE, las = 2, xlab = &quot;BW score&quot;, xlim = c(-4, 4)) dev.off() END_R tab_BWS_aggregate_score.csv mataLatex import delim using &quot;d:\\tab_BWS_aggregate_score.csv&quot; , clear gen att_id=_n rename v1 att_name order att_id , b(att_name) * tex output texsave _all using &quot;d:\\tab_BWS_aggregate_score.tex&quot; , frag replace /// title(Aggregated best-worst scores) /// footnote(Note: The number of respondents is 190) Analyzing responses using the modeling approach use &quot;d:\\final.dta&quot; , clear fr &lt;- RES ~ A + B + C + E + F + G + H + I + J + K + L + M + strata(STR) % the model exclude D to normalize its coefficient to 0 clogit(formula = fr, data = dat) "],["r.html", "Chapter 5 R 5.1 Workflow/Reproducible research 5.2 Plot/graph/visualisation 5.3 Data 5.4 Install R/RStudio", " Chapter 5 R 5.1 Workflow/Reproducible research Why do we need notebook interface()? A:humancomputer interaction--, , notebook interface(literate programming), which input PDF, while output HTML, PDF, DOC, dashboard and so on. Some major human-computer interfaces as below: 1 Text-based user interface, e.g. Command-line interface -&gt; notebook interface 2 Graphical user interfaces (GUIs) VS. Sonic user interface 3 Natural language user interface 4 Tangible user interface, e.g. Touch user interface Rmd, stevetemplates, File-&gt; New File-&gt; R Markdown-&gt;From templates R Markdown()LatexPDF, word, html, slides R Shiny (), githubtemplates  Markdown (markup language): a lightweight markup language (like HTML) Markdown (R package): the predecessor of rmarkdown, converts .Rmd files into HTML R Markdown (R package):  rmarkdown and knitr R Markdown (markup language): .Rmd file that is an excellent literate programming and reproducible research Knitr converts .Rmd -&gt; .md .Rnw(Sweave) -&gt; .tex .Rhtml -&gt; .html After Knitr works, then Pandoc converts md/tex/html into various formats as PDF/HTML/Word/. 5.2 Plot/graph/visualisation install.packages(geofacet) facet, . The main function in this package is facet_geo() and its use can be thought of as equivalent to ggplot2s facet_wrap() except for the output it creates. The facet_geo() works just like ggplot2s built-in faceting. library(geofacet) library(ggplot2) head(state_ranks) get_grid_names() %% geofacet head(aus_pop) %% Geofacet - Australian population by age group ggplot(aus_pop, aes(age_group, pop / 1e6, fill = age_group)) + geom_col() + facet_geo(~ code, grid = &quot;aus_grid1&quot;) + coord_flip() + labs( title = &quot;Australian Population Breakdown&quot;, caption = &quot;Data Source: ABS Labour Force Survey, 12 month average&quot;, y = &quot;Population [Millions]&quot;) + theme_bw() Install.packages(Shinytableau) Create Tableau(Power BI) Dashboard Extensions With R Shiny() Install.packages(lattice) % focus on multivariate data, and in particular to produce small multiple plots   , dpitiff pdf(&quot;d:/xx.pdf&quot;) ...... dev.off() // now output tiff(600dpi) tiff(file = &quot;C:/test1.tiff&quot;, res = 600, width = 4800, height = 4800, compression = &quot;lzw&quot;) plot(1:22, pch = 1:22, cex = 1:3, col = 1:5) # dev.off() 5.3 Data  c() #Combine Values into a Vector or List M &lt;- vector(length=8) #vector8 read.table() #txt library(foreign) write.dta(data,&quot;d:/test.dta&quot;) # Stata12 write.csv(desmat, file = &quot;D:/desk/UNSW/DCE/haze_desmat.csv&quot;) # csv rbind(a1,a2) # rows bind  cbind(a1,a2) # column   xls  xlsx  xlsx / XLConnect   if(condition){}/else if(condition){} /else{}  for(name in expr_1){ expr_2} | while(condition){expr} | repeat { expr;break } break  next  A &lt;- matrix(1:15,nrow=2,ncol=4,byrow=TRUE) #, Aint A [,1] [,2] [,3] [,4] #[1,][,1] [1,] 1 2 3 4 [2,] 5 6 7 8 cell &lt;- c(3,5,4,5,6,1,1,4,6,7) A &lt;- matrix(cell,nrow=2,ncol=4,byrow=TRUE) #Anumeric x&lt;-1:5; y&lt;-2*1:5 #,2 4 6 8 10 crossprod(x,y) #,110 outer(x,y) #,5x5 t(x) #xtranspose A&lt;-array(1:9,dim=(c(3,3))) #arrays  B&lt;-array(9:1,dim=(c(3,3))) A*B #: A%*%B #: crossprod(A,B) #:t(A)%*%B apply(M,,FUNction)A&lt;-matrix(1:6,nrow=2);apply(A,1,sum) x[-3] #3 x[c(3,5)] #x35 sort(x) # order(x) # X1 &lt;- c(21.3, 19.9, 22.4, 24.1, 25.9) X2 &lt;- c(32.1, 27.8, 30.1, 29.9, NA) #mean(X2)mean(X2,na.rm=TRUE) is.na(X2) # ID &lt;- rep(1:4,each=8) #rep()32 seq(1, 9, by = 2) rep() ID &lt;- rep(c(&quot;X1&quot;,&quot;X2&quot;,&quot;X3&quot;),c(3,2,1)) #  .VS.  (categorical) Rfactor  factor() levels() table()  is.numeric(X) is.character(X)  as.character(X), as.numeric(X)  length(X)&lt;- attributes(object) attr(object,) R mode(x) # dim(x) # length(x) # e.g. d.medlist mode(d.med) length(d.med) attributes(d.med) head(d.med) dd&lt;-as.data.frame(d.med$nalternatives$alt.1) #d.meddd R R X assign(, X); &lt;- X; X -&gt;; # paste(X,Y) #, complex() #  data frame-- // Statamode data.frame() # as.data.frame() # attach() # attach()with() detach() # Dfm$We #DfmWe$(dollar,at) DataAll &lt;- list(Bird=bid.8, ID=ID, Z=Z) #list&quot;=&quot;,&quot;&lt;-&quot;  list-- list() attach() $ accountants$statef attach(accountants)accountants  list() &gt; x = list(name=&quot;Fred&quot;, wife=&quot;Mary&quot;, no.children=3, child.ages=c(4,7,9)) &gt; x $name [1] &quot;Fred&quot; $wife [1] &quot;Mary&quot; $no.children [1] 3 $child.ages [1] 4 7 9  &gt; x[[1]] [1] &quot;Fred&quot; &gt; x[1][1] $name [1] &quot;Fred&quot; &gt; x[&quot;name&quot;][1] $name [1] &quot;Fred&quot; &gt; x$name [1] &quot;Fred&quot;  &gt; L3 = LETTERS[1:3] &gt; L3 [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &gt; d = data.frame(cbind(x = 1, y = 1:10), fac = sample(L3, 10, replace = TRUE)) &gt; d x y fac 1 1 1 B 2 1 2 A 3 1 3 C 4 1 4 C 5 1 5 B 6 1 6 A 7 1 7 A 8 1 8 B 9 1 9 B 10 1 10 A &gt; d$x [1] 1 1 1 1 1 1 1 1 1 1 &gt; d[[2]] [1] 1 2 3 4 5 6 7 8 9 10 &gt; d[1][1] x 1 1 2 1 3 1 4 1 5 1 6 1 7 1 8 1 9 1 10 1 5.4 Install R/RStudio Rstudio Rstudio is IDE of R, needs setup of R before. Rstudio-&gt;tools-&gt;Global options-&gt;R R, packages install.packages(c(apollo, arm, backports, BayesLCA, bibtex, bit, bit64, bitops, BMA, brio, caret, caTools, cli, colorspace, curl, data.table, deSolve, diffobj, digest, dotCall64, dplyr, e1071, effects, ellipsis, expm, fansi, farver, fastmap, fields, fs, geofacet, gert, git2r, glue, gmp, gower, gsynth, haven, hdrcde, Hmisc, htmltools, httpuv, ipred, isoband, jpeg, jsonlite, ks, later, latticeExtra, lfe, lme4, lmtest, lubridate, magick, magrittr, maps, maptools, Matrix, matrixStats, mclust, MCMCpack, memisc, mime, mnormt, msm, multicool, mvtnorm, nloptr, openssl, partitions, pcaPP, pkgload, pROC, processx, promises, proxy, ps, quantreg, randtoolbox, rappdirs, Rcpp, RcppArmadillo, RcppEigen, RCurl, readr, readstata13, rgl, rJava, rlang, rngWELL, robustbase, RODBC, roxygen2, rrcov, sass, sem, slam, sp, spam, SparseM, statmod, stringi, sys, testthat, tibble, tidyr, tidyverse, tis, utf8, vctrs, VGAM, VGAMdata, vroom, XLConnect, XML, xml2, zip, zoo))  install.packages(&quot;support.CEs&quot;) #support.CEsDCEpackage install.packages(&quot;&quot;,lib=&quot;&quot;,repos=&quot;&quot;) search() # detach(package:) # data() # data(package = ) # .libPaths() #library helptry.all.package=TRUE  &gt;help(bs,try.all.package=TRUE); # Package Library splines E:\\work\\R\\library &gt;help(bs,package=&quot;splines&quot;); &gt;help.search(&quot;tree&quot;); #treeapi  ?plot # , or help(plot) ??vegan # help.search(&quot;rnorm&quot;) # search help files, even wrong spelling args(&quot;rnorm&quot;) # get arguments RSiteSearch(&quot;discrete choice experiment&quot;) #  functionconsole &gt;damnN methods() summaryaov &gt;methods(summary) &gt;summary.aov IO object.size # setwd(&quot;D:/R/DCE&quot;) # getwd() #working directory dir() # Console ctrl+L semi-colon (;) to put multiple statements on one line   Type library()packages Type library(survival) , Type data():R PATH- &gt; Sys.getenv(&quot;PATH&quot;) Warning message: In normalizePath(path.expand(path), winslash, mustWork) : path[1]=&quot;D:/????&quot;: The filename, directory name, or volume label syntax is incorrect "],["stata.html", "Chapter 6 Stata 6.1 Modelling 6.2 Plot/graph/visualisation 6.3 Connection 6.4 EDA 6.5 Data/Big data", " Chapter 6 Stata 6.1 Modelling ,  powerlaw http://coin.wne.uw.edu.pl/mbrzezinski/software doedit example.do //powerlawhelpexample.do NoteExpress Brzezinski, M. 2014. Do wealth distributions follow power laws? Evidence from `rich lists&#39;. Physica A 406: 155-162. - Fitting Data into Power Distribution: Estimating alpha and x0. It&#39;s not a matter of estimating the 2 parameters together in one step Fit your model using -paretofit- for multiple thresholds over a plausible range, and from this, calculate the K-S statistics. *  help pwlaw //powerStata journal D:\\aa\\LITERATURE\\POOL-2014\\10.1177@1536867X20953571.pdf help qplot //power law, NoteExpressSpeaking Stata: The protean quantile plot. Stata Journal, 2005. 5(3): p. 442-460. help distplot //Do wealth distributions follow power laws? D:\\aa\\LITERATURE\\-\\zipf\\brzezinski2014.pdf - R poweRlaw: Analysis of Heavy Tailed Distributions zero inflated regression (most Y zero) help zinb //Zero-inflated negative binomial regression (Y is a nonnegative count var) help zip //Zero-inflated Poisson regression Stata `help itsa help itsamatch help itsaperm event study help eventdd //  estudy eventstudy eventstudy2 help eventstudy2 DID, for causal analysis with varying treatment time and duration help flexpaneldid help flexpaneldid_preprocessing help bacondecomp //Bacon decomposition of DID estimation with variation in treatment timing help forecast // a suite of commands for obtaining forecasts/projection by solving models DID webuse nlswork // xtset idcode year, delta(1) // xtdescribe // gen age2= age^2 gen ttl_exp2=ttl_exp^2 gen tenure2=tenure^2 global xlist &quot;grade age age2 ttl_exp ttl_exp2 tenure tenure2 not_smsa south race&quot; sum ln_w $xlist // **DID----------------------------------- gen time = (year &gt;= 77) &amp; !missing(year) //1977 gen treated = (idcode &gt;2000)&amp;!missing(idcode) //idcode2000 gen did = time*treated //DID reg ln_w did time treated $xlist //OLSdiff xtreg ln_w did time treated $xlist i.year, fe // **PSM-DID------------------------------- ** PSM set seed 0001 // gen tmp = runiform() // sort tmp // psmatch2 treated $xlist, out(ln_w) logit ate neighbor(1) common caliper(.05) ties //outcome pstest $xlist, both graph // gen common=_support drop if common == 0 // psgraph ** DID reg ln_w did time treated $xlist xtreg ln_w did time treated $xlist i.year, fe **PSM-DID-------------------------------------- * help xi **DID------------------------ **1. tab year, gen(yrdum) //year dummydummy forval v=1/7{ gen treated`v&#39;=yrdum`v&#39;*treated } // xtreg ln_w did treated* i.year ,fe // xtreg ln_w did treated* $xlist i.year ,fe //didtreated* xtreg ln_w did treated* $xlist i.year if union!=1 ,fe //union=0 **2. gen time1 = (year &gt;= 75) &amp; !missing(year) //1975 capture drop treated1 gen treated1= (idcode &gt;2000)&amp;!missing(idcode) //idcode2000 gen did1 = time1*treated1 //DID gen time2 = (year &gt;= 76) &amp; !missing(year) //1976 capture drop treated2 gen treated2= (idcode &gt;2000)&amp;!missing(idcode) //idcode2000 gen did2 = time2*treated2 //DID xtreg ln_w did1 $xlist i.year,fe xtreg ln_w did2 $xlist i.year,fe //did1did2, **3. gen time3 = (year &gt;= 77) &amp; !missing(year) capture drop treated3 gen treated3= (idcode&lt;1600 &amp; idcode&gt;1000)&amp;!missing(idcode) // gen did3 = time3*treated3 xtreg ln_w did3 $xlist i.year,fe //did3 **4. gen time4 = (year &gt;= 77) &amp; !missing(year) capture drop treated4 gen treated4= (idcode&lt;3000 &amp; idcode&gt;2300)&amp;!missing(idcode) // gen did4 = time4*treated4 xtreg ln_w did4 $xlist i.year,fe //did4 **5. xi:xtivreg2 ln_w (did=hours tenure) $xlist i.year,fe first //  **------------- forval v=8/15{ gen treated`v&#39;=yrdum`v&#39;*treated } //yrdum8year=78 reg ln_w treated* xtreg ln_w treated*, fe xtreg ln_w treated* i.year,fe xtreg ln_w treated* $xlist i.year,fe //treated*  (DID) help diff //sj16-1 help ddid //Pre-post-treatment estimation of the Average Treatment Effect (ATE) with binary time-varying treatment didq //Treatment-effect estimation under alternative assumptions, SJ 15(3):796--808 help absdid //Semiparametric difference-in-differences estimator of Abadie (2005), SJ16-2,   * RDD -- Analysis of regression-discontinuity designs with multiple cutoffs or multiple scores https://journals.sagepub.com/doi/pdf/10.1177/1536867X20976320 **RDD------------------- tab treated,missing keep if treated==1 cmogram ln_w year,cut(77) scatter lineat(77) qfitci // ** set more off rdbwselect ln_w year if 60&lt;=year&amp;year&lt;=85,c(77) kernel(uni) // rdob ln_w year, c(77) //imbensrdob reg ln_w time $xlist if 60&lt;year&amp;year&lt;80 //timeols 6.1.1 inequality /Gini  CI   1ordecomposition of a change in inequality  Statadsginideco(2017) - Decomposition of inequality change into pro-poor growth and mobility components adecomp(2012) - Shapley Decomposition by Components of a Welfare Measure 2  StataINEQDECOInequality decompositions by subgroup trnbin0  count data Yvar  ineqrbd  Regression-based inequality decomposition, following Fields (2003) ineqfac(2009)  Inequality decomposition by factor components, following Shorrocks (1982a, b) fgt_ci  calculates and decomposes FosterGreerThorbecke (and standard) concentration indices rifireg(2016) - Recentered Influence Function (RIF) for (bivariate) rank dependent indices (I) regression / 1.gini decomp: ginidesc , ineqdeco , ineqdec0 1.: inequal inequal7ainequal 6.2 Plot/graph/visualisation help stripplot //  help diagnostic_plots swilk x // z&gt;2.14x p&lt;0.01 pnorm x //  gen u=rnormal(8, 3) // webGL(graphical language) D3JSjavascript, JSON=JavaScript Object Notation PlotlyD3 help libd3 //a Mata wrapper around the D3 JavaScript library help libjson help libhtml Longitudinal data help xtline help xtgraph boxplothttps://wiki.mbalib.com/wiki/%E7%AE%B1%E7%BA%BF%E5%9B%BE gr box x1 x2 //() 3Plots of mean CI over time - twoway lfitci ; caterpillar; ciplot twoway lfitci yvar xvar help caterpillar help ciplot // Caterpillar ciplot yhb , by(ym) // graph combine 1.gph 2.gph , ysize(2) xsize(4) //graph sixplot var //, 6 binscatter //stata three-waytab ym hoslev , sum(wt) nost nofre egen meanwt=mean(wt), by(ym hoslev) separate meanwt, by(hoslev) twoway connected meanwt? ym2, c(L L) sort egen meancmi=mean(cmi), by(ym hoslev) // separate meancmi, by(hoslev) twoway connected meanwt? ym2, c(L L) sort title(DRG) xtitle() ytitle() msymbol(S Oh) xline(201803) legend(label(1 &quot;&quot;)label(2 &quot;&quot;)) 6.2.1 map Extracting Chinese geographic data from Baidu Map API  help cngcode // help cnaddress // help cnmapsearch // help chinagcode // help cntraveltime help grmap //12spmap spmap use &quot;Italy-RegionsData.dta&quot;, clear //&quot;-&quot; spmap relig1 using &quot;Italy-RegionsCoordinates.dta&quot;, id(id) //&quot;&quot;  &quot;-&quot;idlink // &quot;-&quot; relig1  plot&quot;&quot; *into Stata shp2dta -- reads a shape (.shp) and dBase (.dbf) file //shpdbf mif2dta -- converts MapInfo Interchange Format files (aka MIF files) to Stata * geocode3 -- googleAPI3, insheetjsonlibjson(json library),mata geocode3, utf-8 nearstat //distance 6.2.2 scheme help schemes set scheme plotplain //R ggplot set scheme Plottig, permanently // Stata set scheme s2mono, permanently //s2monochrome scheme sysuse auto histogram price, scheme(michigan) percent title(Automobile Prices) //  6.2.3 Output graph Stata figureGhostscript-gswin64c.exewin10Ghostscript, Step I, Step II. win10 C:Files StatapdfStata!gswin64c.exe pdftiff (dpi=r600lzw)figen figen, fig(D:\\fig1) // = doedit &quot;D:\\stata11\\ado\\myado/figen.ado&quot; //ado, cap prog drop figen prog figen syntax, [if] [in] fig(str) graph export &quot;`fig&#39;.pdf&quot; !gswin64c.exe -dSAFER -dBATCH -dNOPAUSE -r600 -sDEVICE=tiff24nc -sCompression=lzw -sOutputFile=&quot;`fig&#39;.tiff&quot; &quot;`fig&#39;.pdf&quot; erase &quot;`fig&#39;.pdf&quot; end 6.3 Connection 6.3.1 Stata &amp; Mplus   dtaMplusdat stata2mplus using c:2.dta // this creates c:2.dat and c:2.inp  StataMplus help runmplus // see: http://www.lvmworkshop.org/home/runmplus-stuff 6.3.2 epidata 6 -&gt; Stata -&gt; .rec 6.3.3 R/Python pythonStata python exit() shellout python_plugin.pdf // Stata-R,: rsource,SP doedit &quot;D:\\aa\\book_Stata_Latex_R\\Stata_R_SP.do&quot; profile.do, R-Stata StataR R global Rterm_path `&quot;D:\\R\\R-4.0.3beta\\bin\\x64\\Rterm.exe&quot;&#39; //specify them in order to call R in Stata global Rterm_options `&quot;--vanilla&quot;&#39; // rsource, terminator(END_OF_R) library(foreign); rauto&lt;-read.dta(&quot;myauto.dta&quot;, convert.f=TRUE); rauto; attributes(rauto); q(); END_OF_R rcall rsourceinteractive net install Rcall, replace from(&quot;d:\\rcall&quot;) help rcall library(&quot;foreign&quot;, lib.loc=&quot;D:/R/R-Portable/App/R-Portable/library&quot;) data&lt;-as.data.frame(med$alternatives$alt.1) # medlist, alt.1attributes write.dta(data,&quot;d:/test.dta&quot;) * Rtab_BWS_aggregate_score.csv StataLatex rcall:data&lt;-as.data.frame(scores$aggregate) # medlist, alt.1attributes rcall:write.csv(data,&quot;d:/tab_BWS_aggregate_score.csv&quot;) # StatamataLatex insheet using &quot;D:\\aa\\CLDS\\BMI\\clds2016_m.csv&quot;, clear import delim using &quot;d:\\tab_BWS_aggregate_score.csv&quot; , clear texsave _all using &quot;d:\\tab_BWS_aggregate_score.tex&quot; , frag replace /// title(Aggregated best-worst scores) /// footnote(Note: The number of respondents is xxx) *** rcall:data(gsynth) rcall:names(turnout) rcall:set.seed(123456) rcall:turnout.ub &lt;- turnout[-c(which(turnout$abb==&quot;WY&quot;)[1:15], sample(1:nrow(turnout),50,replace=FALSE)),] rcall:out &lt;- gsynth(turnout ~ policy_edr + policy_mail_in + policy_motor, /// data = turnout.ub, index = c(&quot;abb&quot;,&quot;year&quot;), se = TRUE, inference = &quot;parametric&quot;, r = c(0, 5), /// CV = TRUE, force = &quot;two-way&quot;, parallel = TRUE, min.T0 = 8, nboots = 1000, seed = 02139) rcall:print(out) rename var1 t tsset t twoway tsline att cilower ciupper,xline(0) yline(0) scheme(s2mono) rcall:out.mc &lt;- gsynth(turnout ~ policy_edr + policy_mail_in + policy_motor, min.T0 = 8, /// data = turnout.ub, index = c(&quot;abb&quot;,&quot;year&quot;), estimator = &quot;mc&quot;, /// se = TRUE, nboots = 1000, seed = 02139) rcall:plot(out.mc, main = &quot;Estimated ATT (MC)&quot;) rcall:print(out.mc) rename var1 t tsset t twoway tsline att cilower ciupper,xline(0) yline(0) scheme(s2mono) Rrun Stata library(RStata) 6.3.4 DOS/shell shell erase do_file.do //shell (&quot;!&quot;) allows you to send commands to your operating system shell // or to enter DOS !erase myfile.txt // DOSerase/del !del myfile.tex !rename try15.dta final.dta !rmdir D:\\aa\\manydoc\\bak.stunicode /s /q //,  winexec notepad &quot;d:\\myfile.txt&quot; //Stata allows you to open file by using notepad 6.3.5 Latex/Markdown Stata(stata14ASCII): markdoc, ketchup StataepsLatex cd d:\\ sysuse auto * run reg eststo mytab: reg mpg weight length esttab mytab using &quot;mytable.tex&quot;, style(tex) replace * draw graph.eps, turn to .pdf scatter mpg length graph export mygraph.eps, replace !epstopdf mygraph.eps // epspdf,latex * compile pdf by latex !pdflatex myoutput.tex -no-shell-escape /* epstopdfpdflatexMiTex shell-escapepdflatex */ !pdflatex CTang_CV.tex -output-directory=.\\output\\ // !copy .\\output\\CTang_CV.pdf .\\ //copy pdf % Latex file myoutput.tex \\documentclass[11pt]{article} \\usepackage{graphicx} \\begin{document} \\section{My table} \\input{mytable.tex} \\section{My graph} \\includegraphics{mygraph.pdf} \\end{document} StatatableLatex program main prepare_data run_regressions output_table end program prepare_data use ../external/tv_potato.dta, clear xtset countycode year label variable log_chip_sales &quot;Log Chip Sales&quot; label variable tv_linear &quot;TV&quot; end program run_regressions //  program setup_table local dep_var &quot;log_chip_sales&quot; local tv_vars &quot;tv_linear&quot; local vce &quot;vce(cluster countycode)&quot; eststo: reg `dep_var&#39; `tv_vars&#39;, `vce&#39; setup_table, unitvar(countycode) timevar(year) eststo: xtreg `dep_var&#39; `tv_vars&#39;, `vce&#39; setup_table, unitvar(countycode) timevar(year) eststo: reg `dep_var&#39; `tv_vars&#39; i.year, `vce&#39; setup_table, unitvar(countycode) timevar(year) eststo: xtreg `dep_var&#39; `tv_vars&#39; i.year, `vce&#39; setup_table, unitvar(countycode) timevar(year) end program setup_table // program run_regressions syntax, unitvar(varname) timevar(varname) if &quot;`e(ivar)&#39;&quot; == &quot;`unitvar&#39;&quot; { estadd local unit_fe &quot;Yes&quot; } else { estadd local unit_fe &quot;No&quot; } local cmdline &quot;`e(cmdline)&#39;&quot; local cmd_substr : subinstr local cmdline &quot;i.`timevar&#39;&quot; &quot;&quot;, count(local cmd_time_fe) if `cmd_time_fe&#39; == 1 { estadd local time_fe &quot;Yes&quot; } else { estadd local time_fe &quot;No&quot; } end program output_table esttab using ../output/regressions.tex, /// replace drop(*.year) /// obslast se label nonotes nomtitles collabels(none) /// cells(b(star fmt(4)) se(par fmt(4))) /// scalars(&quot;unit_fe County Fixed Effects&quot; &quot;time_fe Year Fixed Effects&quot;) /// mgroups(&quot;Log of Chip Sales&quot;, pattern(1) prefix(\\multicolumn{@span}{c}{) /// suffix(}) span erepeat(\\cmidrule(lr){@span})) end main //  Table - r1_mandatory and r2_mandatorys before-after mean comparison - by countries preserve * sample selection drop if Country==&quot;&quot; | r1==. // r1  r2 missing obs * T-test and mean comparison encode Country, gen(country) // string  numerical, so can be used by next ttab foreach v in 1 2 { ttab r`v&#39;_mandatory, by(post) over(country) // calculate difference mat r=r(coefs) ttab r`v&#39;_mandatory, by(post) // for total mat t=r(coefs) ttab r`v&#39;_mandatory, by(post) over(country) tshow // calculate t-stat mat rr=r(coefs) ttab r`v&#39;_mandatory, by(post) tshow mat tt=r(coefs) tabstat r`v&#39;_mandatory , by(country) s(mean count) save // calculate mean and observations tabstatmat A mat rr=[r\\rr] mat tt=[t\\tt] mat rr=[rr,tt] mat rr=rr&#39; mata: st_matrix(&quot;rr&quot; , select(st_matrix(&quot;rr&quot;),(1,1,1,0,0,1))) //2mata2 mat out`v&#39;=[rr, A] } mat out=[out1 , out2] mat colnames out = &quot;Before IFRS&quot; &quot;After IFRS&quot; Diff T-stat Total N &quot;Before IFRS&quot; &quot;After IFRS&quot; Diff T-stat Total N mat rownames out = AUSTRALIA AUSTRIA BELGIUM CANADA DENMARK FINLAND FRANCE GERMANY GREECE &quot;HONG KONG&quot; INDIA INDONESIA IRELAND ITALY JAPAN KOREA(SOUTH) MALAYSIA NETHERLANDS NORWAY PAKISTAN PHILIPPINES PORTUGAL SINGAPORE &quot;SOUTH AFRICA&quot; SPAIN SWEDEN SWITZERLAND TAIWAN THAILAND &quot;UNITED KINGDOM&quot; &quot;UNITED STATES&quot; Total * outstar local bc = rowsof(out) mat star = J(`bc&#39; , 12 , 0) foreach v in 4 10 { forvalues k = 1/`bc&#39; { if abs(out[`k&#39; , `v&#39;]) &lt;= 1.645 { mat star[`k&#39; , `v&#39;] = 0 } else if (abs(out[`k&#39; , `v&#39;]) &gt; 1.645 &amp; abs(out[`k&#39; , `v&#39;]) &lt;= 1.96 ){ mat star[`k&#39; , `v&#39;] = 1 } else if (abs(out[`k&#39; , `v&#39;]) &gt; 1.96 &amp; abs(out[`k&#39; , `v&#39;]) &lt;= 2.58 ){ mat star[`k&#39; , `v&#39;] = 2 } else if abs(out[`k&#39; , `v&#39;]) &gt; 2.58 { mat star[`k&#39; , `v&#39;] = 3 } } } * output word frmttable using output /*in default word */, statmat(out) annotate(star) asymbol(*,**,***) sdec(2,2,2,2,2,0,2,2,2,2,2,0 ) landscape a4 //tex optionlatex restore 6.4 EDA 6.5 Data/Big data Stata 14  UnicodedofileUTF-8dofileconvert to UTF-8 by Notepad++Stata 14  cd d:\\ unicode analyze *.do // .dta unicode encoding set gb18030 unicode translate *.do help getsymbols //API data from Quandl, Google Finance, Yahoo Finance, and Alpha Vantage 6.5.1 Time/age if year==1960 //dont do this! if year[1]==1960 // right, first observation is 1960 drop if date2&lt;date(&quot;01jan2010&quot;,&quot;DMY&quot;) | date2&gt;date(&quot;30sep2011&quot;,&quot;DMY&quot;) // Ageage gen birthdate=1 gen bir=mdy(birthmonth, birthdate, birthyear) // birthmonth format bir %td gen age=(mdy(9,1,2014)-bir)/365.25 drop birthdate bir : x&quot;1-aug-02&quot; monthly(s1,s2[,Y]) date(s1,s2[,Y]) g m = monthly(actual_date, &quot;MY&quot;) //gen,replace,type mismatch format m %tmNN/CCYY g d = date(x,&quot;DM20Y&quot;) form d %td //extract month and year component from a variable (dm) with %tm formate.g.1953m1 gen date = dofm(dm) format date %d gen month=month(date) gen yr=year(date) // https://blog.stata.com/2015/12/17/a-tour-of-datetime-in-stata-i/ help todate help anythingtodate anythingtodate cysj ,k // hist cysjc12 if cysjc12&gt;date(&quot;2015-01-01&quot;, &quot;YMD&quot;) // YYYYMM date to &quot;ym&quot; Stata gen ndate = 201606 gen sdate = &quot;201606&quot; gen ndate2 = ym(floor(ndate/100), mod(ndate, 100)) gen sdate2 = ym(real(substr(sdate, 1, 4)), real(substr(sdate, -2,2))) format *2 %tm l +-----------------------------------+ | ndate sdate ndate2 sdate2 | |-----------------------------------| 1. | 201606 201606 2016m6 2016m6 | +-----------------------------------+ // gen rysj2 = date(string(rysj,&quot;%8.0f&quot;),&quot;YMD&quot;) format %td rysj2 6.5.2 StataMata mat l e(b) //,excel matlist  matrix list display matrix -&gt; variables svmat // svmat2 A , rnames(ym) full //rownames save into a variable mkmat // variables -&gt; matrix xsvmat matmatvariables tab edu urban, matcell(aa) // aa,existing data svmat aa gen n=_n in 1/6 label define edu2 1&quot;High_school&quot; 2&quot;SVD&quot; 3&quot;College&quot; 4&quot;Bachelor&quot; 5&quot;Master&quot; 6&quot;PhD&quot; label values n edu2 graph bar aa1 aa2 , over(n) ytitle(Number of physicians) b1title(Education) legend(label(1 Rural hospitals) label(2 Urban hospitals)) svmat A //- drop in 24 gen n=_n graph twoway connected A1 n Speaking Stata between tables and graphs help taboutgraph //a wrapper for tabout, plot output of two-way tab function taboutgraph var1 var2 [aw=weight] using &quot;filename_to_savedatato.csv&quot;, /// gc(&quot;graph bar&quot;) ta(cells(col) f(2 2 2 2)) replace go( note(&quot;Source: XXX&quot;) /// b1title(&quot;Quintile&quot;) title(`&quot;Composition of Population&quot;&#39;) ytitle(&quot;Percent of population in the quntile&quot;)) descriptive statistcs gen a=1 // bysort hos: gen pn=sum(a) bysort hos: egen b=max(pn) drop if b&lt;10 drop if regexm(hos,&quot;&quot;) replace hos=subinstr(hos,char(10),&quot;&quot;,.) //hos encode hos, generate(hos1) //encodemeanover  -&gt;  label drop hos1 quietly: mean lfdc if year==2010,over(hos1) //overnumeric mat lfdc1=e(b) quietly: mean lfdc if year==2011,over(hos1) mat lfdc2=e(b) quietly:mean drugout if year==2010,over(hos1) mat drug1=e(b) quietly:mean drugout if year==2011,over(hos1) mat drug2=e(b) mat xx=[lfdc1\\lfdc2] //  mat yy=(drug1\\drug2) local aa=rowsof(yy) //loop local bb=colsof(yy) forval x=1/`aa&#39; { forval y=1/`bb&#39; { mat yy[`x&#39;,`y&#39;]=1/yy[`x&#39;,`y&#39;] } } mat ld=hadamard(xx,yy) //--*== local cn=e(over_labels) //2e(over_labels)ld mat rownames ld=2010 2011 mat colnames ld=&quot;`cn&#39;&quot; mat ldt=ld&#39; mat l ldt local : rownames ld  tabstatmat tabstat lfdc drugout if year==2010, by(hos) s(mean) save //saver() tabstatmat A // tabstat lfdc drugout if year==2011, by(hos) s(mean) save //saver() tabstatmat B local cc=rowsof(A) forval x=1/`cc&#39;{ mat A[`x&#39;,1] = A[`x&#39;,1]/A[`x&#39;,2] mat A[`x&#39;,2] = B[`x&#39;,1]/B[`x&#39;,2] } mat colnames A=2010 2011 mat l A  statsmat //Produce matrix of descriptive statistics foreach x in 1 2 3{ // Loop foreach v of varlist day fee feeday drug drugday{ //  statsmat `v&#39; if case==`x&#39;, by(own) mat(`v&#39;`x&#39;) s(mean sd) f(%3.2f) xpose } } Statamata st_view() make Mata matrices &quot;x&quot; from a Stata dataset &quot;varname&quot; st_data() Load copy of current Stata dataset st_numscalar() obtain value from colsum(x) and put into r(sum) // mataStata&quot;&quot; mata: st_matrix(&quot;rr&quot; , select(st_matrix(&quot;rr&quot;),(1,1,1,0,0,1))) //3mata3st_matrix()statamatrixmata mata: st_matrix(&quot;temp&quot;):/st_matrix(&quot;xiaono&quot;) //element-by-element  :* mata: st_matrix(&quot;JJ&quot;, st_matrix(&quot;aa&quot;):/st_matrix(&quot;minorno&quot;)) //JJStatamata mataAtypelistStatamat list A  &gt;mata: istmt //for programmers,end &gt;mata: Z[., .]=X:-mean(X) //obmean(X)center a variable on the mean  &gt;mata //if an error occurs, still stay in mata &gt; istmt &gt;end Mata   help mata mlib //a group of functions, like library help max() // help mata max() mata query // mata setting mata describe //mata mata drop mata clear viewsource diag.mata help moremata //see extra mata function, especially their source code 6.5.3 Big data -97%drop https://www.cpc.unc.edu/research/tools/data_analysis/statatutorial/misc/large_files describe using bigfile.dta //bigfile lookfor and lookfor_all use list_of_variables using use in use if use if inrange(runiform(),0,.1) using bigfile.dta help ftools //Stata help gtools help parallel //stata "],["python.html", "Chapter 7 Python 7.1 Deepnote 7.2 Network science(complex network) 7.3 Plot and visualisation", " Chapter 7 Python 7.1 Deepnote The best platform for Python/R, which is cloud-based, real time, no install requirements, with lots of packages already installed. Disadvantages: 1) Running speed is low for R, compared to my RStudio. 2) For R, packages combination is not well-supported, so the dockerhub image is required for setting up environment. 7.2 Network science(complex network) NetworKit is a growing open-source toolkit for large-scale network analysis. This moduler includes standard measures of network analysis, such as degree sequences, clustering coefficients, centrality measures, and more. 7.3 Plot and visualisation PlotlyPython(bokeh)/(Jupyter Notebook )Python, MATLAB, R Python: 1. cufflinks+express+plotly; 2. bokeh+hvplot : ggplot() -&gt; plotly() -&gt; cufflinks : matplotlib() -&gt; seaborn "],["sqltableaupowerbi.html", "Chapter 8 SQL/Tableau/PowerBI 8.1 SQL 8.2 Tableau 8.3 Power BI", " Chapter 8 SQL/Tableau/PowerBI REDCAP is based on MySQL, still a data store and management tool 8.1 SQL SQL(Structured Query Language) is used to create queries to manipulate the data stored in a database. Oracle SQL, is one like Microsoft SQL Server, PL/SQL Case: Oracle * oracle 11.2.0.1.0 https://jingyan.baidu.com/article/363872eccfb9266e4aa16f5d.html *C:\\Oracle *dmpD:\\Oracle\\XXX *dmpdbfD:\\app\\XNH\\oradata\\oracledb XNHsc2018 sqlplus system *(phis) oracle 12.1.0.2.0 XNH XNHsc2018 *D:\\app\\XNH *D:\\app\\XNH\\product\\12.1.0\\dbhome_2 *D:\\app\\XNH\\oradata oraclebd XNHsc2018 pdborcl * PHIS_JGS 123 Case: plsql  CREATE TABLE ZYZDDETAIL_1 AS SELECT TO_CHAR(id) id, zyid, JBBM, LOGINUSERID, LOGINDATE, UPDATE_TIME FROM ZYZDDETAIL; Case: sqlplus(Stata+ODBC ) 1. 1.1remap_tablespace 1.2REMAP_TABLESPACE=ehr:users,tbs_phis:usersehrtbs_phisusers 1.3XXXCTRL+CKILL_JOBYES 1.4SPS_PHISTBS_LOGTBS_PHISPHIS_HIS 2.directory 2.1dmpdmpD:\\bakdmp 2.2sqlplussystem/XNHsc2018 create or replace directory full as &#39;D:\\bak&#39;; create or replace directory full as &#39;D:\\Oracle\\jiange&#39;; // 3. cmd&quot;&quot; impdp system/XNHsc2018@localhost/oracledb dumpfile=jg180915_%U.dmplogfile=jg180915_imp.log directory=full remap_tablespace=SPS_PHIS:users,TBS_LOG:users,TBS_PHIS:users,PHIS_HIS:users parallel=6 cluster=n Open Database Connectivity (ODBC) interface makes it possible for applications(Stata/R) to access data from a variety of database management systems (e.g. SQL Server). ODBCDNS home2 datasourcename: description TNS Service Nameoraclebdoracle User IDIDlog *ODBC odbc list //StataODBCSQL help odbc StataODBC 8.2 Tableau Tableau(Power BI) 8.3 Power BI Key words: interactive data visualization, Microsoft, business intelligence(BI) "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
